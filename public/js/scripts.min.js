/******/ (function(modules) { // webpackBootstrap
/******/ 	// The module cache
/******/ 	var installedModules = {};
/******/
/******/ 	// The require function
/******/ 	function __webpack_require__(moduleId) {
/******/
/******/ 		// Check if module is in cache
/******/ 		if(installedModules[moduleId])
/******/ 			return installedModules[moduleId].exports;
/******/
/******/ 		// Create a new module (and put it into the cache)
/******/ 		var module = installedModules[moduleId] = {
/******/ 			exports: {},
/******/ 			id: moduleId,
/******/ 			loaded: false
/******/ 		};
/******/
/******/ 		// Execute the module function
/******/ 		modules[moduleId].call(module.exports, module, module.exports, __webpack_require__);
/******/
/******/ 		// Flag the module as loaded
/******/ 		module.loaded = true;
/******/
/******/ 		// Return the exports of the module
/******/ 		return module.exports;
/******/ 	}
/******/
/******/
/******/ 	// expose the modules object (__webpack_modules__)
/******/ 	__webpack_require__.m = modules;
/******/
/******/ 	// expose the module cache
/******/ 	__webpack_require__.c = installedModules;
/******/
/******/ 	// __webpack_public_path__
/******/ 	__webpack_require__.p = "";
/******/
/******/ 	// Load entry module and return exports
/******/ 	return __webpack_require__(0);
/******/ })
/************************************************************************/
/******/ ([
/* 0 */
/***/ function(module, exports, __webpack_require__) {

	__webpack_require__ (1);
	__webpack_require__ (2);


/***/ },
/* 1 */
/***/ function(module, exports) {

	// main.js
	/* eslint-disable no-undef */
	$(document).ready(function() {
	
	    // find the URL of your JSON file on AWS - it'll be in your bucket
	    // and look something like https://s3-eu-west-1.amazonaws.com/[bucket name]/pollen.json
	    // we load the JSON file using jQuery's AJAX
	    $.get("https://s3-eu-west-1.amazonaws.com/thepollenreport/pollen.json")
	
	    // Once we have the data, we parse it to find the pollen count
	    .done(function(data) {
	        data = JSON.parse(data);
	        const pollen = data.count;
	
	        // update the <h1 class="mega"> with the pollen count
	        $('.mega').text(pollen);
	    })
	
	    // if we couldn't get the data from AWS, display an error message
	    .fail(function() {
	        $('.mega').text('Unknown');
	        $('.main').append('<p>Refresh to try again</p>');
	    })
	
	    .always(function() {
	        // if you're using a loading gif, this is where you'd hide it
	    });
	});


/***/ },
/* 2 */
/***/ function(module, exports, __webpack_require__) {

	"use strict";
	
	var _stringify = __webpack_require__(3);
	
	var _stringify2 = _interopRequireDefault(_stringify);
	
	function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }
	
	//commentbox.js
	/* eslint-disable no-undef */
	/* eslint-disable no-unused-vars*/
	var Comment = React.createClass({
	  displayName: "Comment",
	
	  render: function render() {
	    var md = new Remarkable();
	    return React.createElement(
	      "div",
	      { className: "comment" },
	      React.createElement(
	        "p",
	        null,
	        this.props.author,
	        " says - ",
	        this.props.children
	      )
	    );
	  }
	});
	var CommentList = React.createClass({
	  displayName: "CommentList",
	
	  render: function render() {
	    var commentNodes = this.props.data.map(function (comment) {
	      return React.createElement(
	        Comment,
	        { author: comment.author, key: comment.id },
	        comment.text
	      );
	    });
	    return React.createElement(
	      "div",
	      { className: "commentList" },
	      commentNodes
	    );
	  }
	});
	var CommentForm = React.createClass({
	  displayName: "CommentForm",
	
	  getInitialState: function getInitialState() {
	    return { author: '', text: '' };
	  },
	  handleAuthorChange: function handleAuthorChange(e) {
	    this.setState({ author: e.target.value });
	  },
	  handleTextChange: function handleTextChange(e) {
	    this.setState({ text: e.target.value });
	  },
	  handleSubmit: function handleSubmit(e) {
	    //Stop browser default submit
	    e.preventDefault();
	    var author = this.state.author.trim();
	    var text = this.state.text.trim();
	    if (!text || !author) {
	      return;
	    }
	    var id = Date.now();
	    this.props.onContentSubmit({ id: id.toString(), author: author, text: text });
	    this.setState({ author: '', text: '' });
	  },
	  render: function render() {
	    return React.createElement(
	      "form",
	      { className: "commentForm", onSubmit: this.handleSubmit },
	      React.createElement("input", {
	        type: "text",
	        placeholder: "Your name",
	        value: this.state.author,
	        onChange: this.handleAuthorChange
	      }),
	      React.createElement("input", {
	        type: "text",
	        placeholder: "What you want to say...",
	        value: this.state.text,
	        onChange: this.handleTextChange
	      }),
	      React.createElement("input", { type: "submit", value: "Post" })
	    );
	  }
	});
	var CommentBox = React.createClass({
	  displayName: "CommentBox",
	
	  loadCommentsFromServer: function loadCommentsFromServer() {
	    $.ajax({
	      url: this.props.url,
	      dataType: 'json',
	      cache: false,
	      success: function (data) {
	        console.log(data);
	        this.setState({ data: data });
	      }.bind(this),
	      error: function (xhr, status, err) {
	        console.error(this.props.url, status, err.toString());
	      }.bind(this)
	    });
	  },
	  handleCommentSubmit: function handleCommentSubmit(comment) {
	    // Insert new comment and delete last one
	    this.state.data.splice(0, 0, comment);
	    this.state.data.splice(-1, 1);
	    $.ajax({
	      url: this.props.sendCommentUrl,
	      dataType: 'json',
	      type: 'POST',
	      data: (0, _stringify2.default)(this.state.data),
	      contentType: "application/json",
	      success: function (data) {
	        console.log(data);
	        console.log("After sending " + (0, _stringify2.default)(this.state.data));
	      }.bind(this),
	      error: function (xhr, status, err) {
	        console.error(this.props.sendCommentUrl, status, err.toString());
	      }.bind(this)
	    });
	  },
	  getInitialState: function getInitialState() {
	    return { data: [] };
	  },
	  componentDidMount: function componentDidMount() {
	    this.loadCommentsFromServer();
	    setInterval(this.loadCommentsFromServer, this.props.pollInterval);
	  },
	  render: function render() {
	    return React.createElement(
	      "div",
	      { className: "commentBox" },
	      React.createElement(
	        "h1",
	        null,
	        "Have your say"
	      ),
	      React.createElement(CommentForm, { onContentSubmit: this.handleCommentSubmit }),
	      React.createElement(CommentList, { data: this.state.data })
	    );
	  }
	});
	ReactDOM.render(React.createElement(CommentBox, {
	  url: "https://s3-eu-west-1.amazonaws.com/thepollenreport/comments.json",
	  sendCommentUrl: ("http://localhost:3000/api/v1/comments"),
	  pollInterval: 2000 }), document.getElementById('comments'));

/***/ },
/* 3 */
/***/ function(module, exports, __webpack_require__) {

	module.exports = { "default": __webpack_require__(4), __esModule: true };

/***/ },
/* 4 */
/***/ function(module, exports, __webpack_require__) {

	var core  = __webpack_require__(5)
	  , $JSON = core.JSON || (core.JSON = {stringify: JSON.stringify});
	module.exports = function stringify(it){ // eslint-disable-line no-unused-vars
	  return $JSON.stringify.apply($JSON, arguments);
	};

/***/ },
/* 5 */
/***/ function(module, exports) {

	var core = module.exports = {version: '2.4.0'};
	if(typeof __e == 'number')__e = core; // eslint-disable-line no-undef

/***/ }
/******/ ]);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vd2VicGFjay9ib290c3RyYXAgZGE0NDI3MTBhODFiNTUwOThkZDMiLCJ3ZWJwYWNrOi8vLy4vcHVibGljL2pzL3NjcmlwdHMuanMiLCJ3ZWJwYWNrOi8vLy4vcHVibGljL2pzL21haW4uanMiLCJ3ZWJwYWNrOi8vLy4vcHVibGljL2pzL2NvbW1lbnRib3guanMiLCJ3ZWJwYWNrOi8vLy4vfi9iYWJlbC1ydW50aW1lL2NvcmUtanMvanNvbi9zdHJpbmdpZnkuanMiLCJ3ZWJwYWNrOi8vLy4vfi9jb3JlLWpzL2xpYnJhcnkvZm4vanNvbi9zdHJpbmdpZnkuanMiLCJ3ZWJwYWNrOi8vLy4vfi9jb3JlLWpzL2xpYnJhcnkvbW9kdWxlcy9fY29yZS5qcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiO0FBQUE7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0EsdUJBQWU7QUFDZjtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7O0FBR0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTs7Ozs7OztBQ3RDQTtBQUNBOzs7Ozs7O0FDREE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQSxNQUFLOztBQUVMO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsTUFBSzs7QUFFTDtBQUNBO0FBQ0EsTUFBSztBQUNMLEVBQUM7Ozs7Ozs7Ozs7Ozs7OztBQzNCRDtBQUNBO0FBQ0E7QUFDQSxLQUFNLFVBQVUsTUFBTSxXQUFOLENBQWtCO0FBQUE7O0FBQ2hDLFdBQU8sa0JBQVU7QUFDZixTQUFNLEtBQUssSUFBSSxVQUFKLEVBQVg7QUFDQSxZQUNFO0FBQUE7QUFBQSxTQUFLLFdBQVUsU0FBZjtBQUNFO0FBQUE7QUFBQTtBQUFJLGNBQUssS0FBTCxDQUFXLE1BQWY7QUFBQTtBQUErQixjQUFLLEtBQUws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Q0U7QUFBQTtBQUFBO0FBQUE7QUFBQSxRQURGO0FBRUUsMkJBQUMsV0FBRCxJQUFhLGlCQUFpQixLQUFLLG1CQUFuQyxHQUZGO0FBR0UsMkJBQUMsV0FBRCxJQUFhLE1BQU0sS0FBSyxLQUFMLENBQVcsSUFBOUI7QUFIRixNQURGO0FBT0Q7QUFqRGtDLEVBQWxCLENBQW5CO0FBbURBLFVBQVMsTUFBVCxDQUNFLG9CQUFDLFVBQUQ7QUFDRSxRQUFJLGtFQUROO0FBRUUsbUJBQWdCLHlDQUZsQjtBQUdFLGlCQUFjLElBSGhCLEdBREYsRUFLRSxTQUFTLGNBQVQsQ0FBd0IsVUFBeEIsQ0FMRixFOzs7Ozs7QUMxSEEsbUJBQWtCLHVEOzs7Ozs7QUNBbEI7QUFDQSx3Q0FBdUMsMEJBQTBCO0FBQ2pFLHlDQUF3QztBQUN4QztBQUNBLEc7Ozs7OztBQ0pBLDhCQUE2QjtBQUM3QixzQ0FBcUMsZ0MiLCJmaWxlIjoic2NyaXB0cy5taW4uanMiLCJzb3VyY2VzQ29udGVudCI6WyIgXHQvLyBUaGUgbW9kdWxlIGNhY2hlXG4gXHR2YXIgaW5zdGFsbGVkTW9kdWxlcyA9IHt9O1xuXG4gXHQvLyBUaGUgcmVxdWlyZSBmdW5jdGlvblxuIFx0ZnVuY3Rpb24gX193ZWJwYWNrX3JlcXVpcmVfXyhtb2R1bGVJZCkge1xuXG4gXHRcdC8vIENoZWNrIGlmIG1vZHVsZSBpcyBpbiBjYWNoZVxuIFx0XHRpZihpbnN0YWxsZWRNb2R1bGVzW21vZHVsZUlkXSlcbiBcdFx0XHRyZXR1cm4gaW5zdGFsbGVkTW9kdWxlc1ttb2R1bGVJZF0uZXhwb3J0cztcblxuIFx0XHQvLyBDcmVhdGUgYSBuZXcgbW9kdWxlIChhbmQgcHV0IGl0IGludG8gdGhlIGNhY2hlKVxuIFx0XHR2YXIgbW9kdWxlID0gaW5zdGFsbGVkTW9kdWxlc1ttb2R1bGVJZF0gPSB7XG4gXHRcdFx0ZXhwb3J0czoge30sXG4gXHRcdFx0aWQ6IG1vZHVsZUlkLFxuIFx0XHRcdGxvYWRlZDogZmFsc2VcbiBcdFx0fTtcblxuIFx0XHQvLyBFeGVjdXRlIHRoZSBtb2R1bGUgZnVuY3Rpb25cbiBcdFx0bW9kdWxlc1ttb2R1bGVJZF0uY2FsbChtb2R1bGUuZXhwb3J0cywgbW9kdWxlLCBtb2R1bGUuZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXyk7XG5cbiBcdFx0Ly8gRmxhZyB0aGUgbW9kdWxlIGFzIGxvYWRlZFxuIFx0XHRtb2R1bGUubG9hZGVkID0gdHJ1ZTtcblxuIFx0XHQvLyBSZXR1cm4gdGhlIGV4cG9ydHMgb2YgdGhlIG1vZHVsZVxuIFx0XHRyZXR1cm4gbW9kdWxlLmV4cG9ydHM7XG4gXHR9XG5cblxuIFx0Ly8gZXhwb3NlIHRoZSBtb2R1bGVzIG9iamVjdCAoX193ZWJwYWNrX21vZHVsZXNfXylcbiBcdF9fd2VicGFja19yZXF1aXJlX18ubSA9IG1vZHVsZXM7XG5cbiBcdC8vIGV4cG9zZSB0aGUgbW9kdWxlIGNhY2hlXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLmMgPSBpbnN0YWxsZWRNb2R1bGVzO1xuXG4gXHQvLyBfX3dlYnBhY2tfcHVibGljX3BhdGhfX1xuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5wID0gXCJcIjtcblxuIFx0Ly8gTG9hZCBlbnRyeSBtb2R1bGUgYW5kIHJldHVybiBleHBvcnRzXG4gXHRyZXR1cm4gX193ZWJwYWNrX3JlcXVpcmVfXygwKTtcblxuXG5cbi8qKiBXRUJQQUNLIEZPT1RFUiAqKlxuICoqIHdlYnBhY2svYm9vdHN0cmFwIGRhNDQyNzEwYTgxYjU1MDk4ZGQzXG4gKiovIiwicmVxdWlyZSAoJy4vbWFpbi5qcycpO1xucmVxdWlyZSAoJy4vY29tbWVudGJveC5qcycpO1xuXG5cblxuLyoqKioqKioqKioqKioqKioqXG4gKiogV0VCUEFDSyBGT09URVJcbiAqKiAuL3B1YmxpYy9qcy9zY3JpcHRzLmpzXG4gKiogbW9kdWxlIGlkID0gMFxuICoqIG1vZHVsZSBjaHVua3MgPSAwXG4gKiovIiwiLy8gbWFpbi5qc1xuLyogZXNsaW50LWRpc2FibGUgbm8tdW5kZWYgKi9cbiQoZG9jdW1lbnQpLnJlYWR5KGZ1bmN0aW9uKCkge1xuXG4gICAgLy8gZmluZCB0aGUgVVJMIG9mIHlvdXIgSlNPTiBmaWxlIG9uIEFXUyAtIGl0J2xsIGJlIGluIHlvdXIgYnVja2V0XG4gICAgLy8gYW5kIGxvb2sgc29tZXRoaW5nIGxpa2UgaHR0cHM6Ly9zMy1ldS13ZXN0LTEuYW1hem9uYXdzLmNvbS9bYnVja2V0IG5hbWVdL3BvbGxlbi5qc29uXG4gICAgLy8gd2UgbG9hZCB0aGUgSlNPTiBmaWxlIHVzaW5nIGpRdWVyeSdzIEFKQVhcbiAgICAkLmdldChcImh0dHBzOi8vczMtZXUtd2VzdC0xLmFtYXpvbmF3cy5jb20vdGhlcG9sbGVucmVwb3J0L3BvbGxlbi5qc29uXCIpXG5cbiAgICAvLyBPbmNlIHdlIGhhdmUgdGhlIGRhdGEsIHdlIHBhcnNlIGl0IHRvIGZpbmQgdGhlIHBvbGxlbiBjb3VudFxuICAgIC5kb25lKGZ1bmN0aW9uKGRhdGEpIHtcbiAgICAgICAgZGF0YSA9IEpTT04ucGFyc2UoZGF0YSk7XG4gICAgICAgIGNvbnN0IHBvbGxlbiA9IGRhdGEuY291bnQ7XG5cbiAgICAgICAgLy8gdXBkYXRlIHRoZSA8aDEgY2xhc3M9XCJtZWdhXCI+IHdpdGggdGhlIHBvbGxlbiBjb3VudFxuICAgICAgICAkKCcubWVnYScpLnRleHQocG9sbGVuKTtcbiAgICB9KVxuXG4gICAgLy8gaWYgd2UgY291bGRuJ3QgZ2V0IHRoZSBkYXRhIGZyb20gQVdTLCBkaXNwbGF5IGFuIGVycm9yIG1lc3NhZ2VcbiAgICAuZmFpbChmdW5jdGlvbigpIHtcbiAgICAgICAgJCgnLm1lZ2EnKS50ZXh0KCdVbmtub3duJyk7XG4gICAgICAgICQoJy5tYWluJykuYXBwZW5kKCc8cD5SZWZyZXNoIHRvIHRyeSBhZ2FpbjwvcD4nKTtcbiAgICB9KVxuXG4gICAgLmFsd2F5cyhmdW5jdGlvbigpIHtcbiAgICAgICAgLy8gaWYgeW91J3JlIHVzaW5nIGEgbG9hZGluZyBnaWYsIHRoaXMgaXMgd2hlcmUgeW91J2QgaGlkZSBpdFxuICAgIH0pO1xufSk7XG5cblxuXG4vKioqKioqKioqKioqKioqKipcbiAqKiBXRUJQQUNLIEZPT1RFUlxuICoqIC4vcHVibGljL2pzL21haW4uanNcbiAqKiBtb2R1bGUgaWQgPSAxXG4gKiogbW9kdWxlIGNodW5rcyA9IDBcbiAqKi8iLCIvL2NvbW1lbnRib3guanNcbi8qIGVzbGludC1kaXNhYmxlIG5vLXVuZGVmICovXG4vKiBlc2xpbnQtZGlzYWJsZSBuby11bnVzZWQtdmFycyovXG5jb25zdCBDb21tZW50ID0gUmVhY3QuY3JlYXRlQ2xhc3Moe1xuICByZW5kZXI6ZnVuY3Rpb24oKXtcbiAgICBjb25zdCBtZCA9IG5ldyBSZW1hcmthYmxlKCk7XG4gICAgcmV0dXJuKFxuICAgICAgPGRpdiBjbGFzc05hbWU9XCJjb21tZW50XCI+XG4gICAgICAgIDxwPnt0aGlzLnByb3BzLmF1dGhvcn0gc2F5cyAtIHt0aGlzLnByb3BzLmNoaWxkcmVufTwvcD5cbiAgICAgIDwvZGl2PlxuICAgICk7XG4gIH1cbn0pO1xuY29uc3QgQ29tbWVudExpc3QgPSBSZWFjdC5jcmVhdGVDbGFzcyh7XG4gIHJlbmRlcjogZnVuY3Rpb24oKXtcbiAgICBjb25zdCBjb21tZW50Tm9kZXMgPSB0aGlzLnByb3BzLmRhdGEubWFwKGZ1bmN0aW9uKGNvbW1lbnQpe1xuICAgICAgcmV0dXJuKFxuICAgICAgICA8Q29tbWVudCBhdXRob3I9e2NvbW1lbnQuYXV0aG9yfSBrZXk9e2NvbW1lbnQuaWR9PlxuICAgICAgICAgIHtjb21tZW50LnRleHR9XG4gICAgICAgIDwvQ29tbWVudD5cbiAgICAgICk7XG4gICAgfSk7XG4gICAgcmV0dXJuKFxuICAgICAgPGRpdiBjbGFzc05hbWU9XCJjb21tZW50TGlzdFwiPlxuICAgICAgICB7Y29tbWVudE5vZGVzfVxuICAgICAgPC9kaXY+XG4gICAgKTtcbiAgfVxufSk7XG5jb25zdCBDb21tZW50Rm9ybSA9IFJlYWN0LmNyZWF0ZUNsYXNzKHtcbiAgZ2V0SW5pdGlhbFN0YXRlOiBmdW5jdGlvbigpe1xuICAgIHJldHVybnthdXRob3I6ICcnLCB0ZXh0OiAnJ307XG4gIH0sXG4gIGhhbmRsZUF1dGhvckNoYW5nZTogZnVuY3Rpb24oZSl7XG4gICAgdGhpcy5zZXRTdGF0ZSh7YXV0aG9yOiBlLnRhcmdldC52YWx1ZX0pO1xuICB9LFxuICBoYW5kbGVUZXh0Q2hhbmdlOiBmdW5jdGlvbihlKXtcbiAgICB0aGlzLnNldFN0YXRlKHt0ZXh0OiBlLnRhcmdldC52YWx1ZX0pO1xuICB9LFxuICBoYW5kbGVTdWJtaXQ6IGZ1bmN0aW9uKGUpe1xuICAgIC8vU3RvcCBicm93c2VyIGRlZmF1bHQgc3VibWl0XG4gICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuICAgIGxldCBhdXRob3IgPSB0aGlzLnN0YXRlLmF1dGhvci50cmltKCk7XG4gICAgbGV0IHRleHQgPSAgdGhpcy5zdGF0ZS50ZXh0LnRyaW0oKTtcbiAgICBpZiAoIXRleHQgfHwgIWF1dGhvcil7XG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIGxldCBpZCA9IERhdGUubm93KCk7XG4gICAgdGhpcy5wcm9wcy5vbkNvbnRlbnRTdWJtaXQoe2lkOiBpZC50b1N0cmluZygpLCBhdXRob3I6IGF1dGhvciwgdGV4dDogdGV4dH0pO1xuICAgIHRoaXMuc2V0U3RhdGUoe2F1dGhvcjogJycsIHRleHQ6ICcnfSk7XG4gIH0sXG4gIHJlbmRlcjogZnVuY3Rpb24oKXtcbiAgICByZXR1cm4oXG4gICAgICA8Zm9ybSBjbGFzc05hbWU9XCJjb21tZW50Rm9ybVwiIG9uU3VibWl0PXt0aGlzLmhhbmRsZVN1Ym1pdH0+XG4gICAgICAgIDxpbnB1dFxuICAgICAgICAgIHR5cGU9XCJ0ZXh0XCJcbiAgICAgICAgICBwbGFjZWhvbGRlcj1cIllvdXIgbmFtZVwiXG4gICAgICAgICAgdmFsdWU9e3RoaXMuc3RhdGUuYXV0aG9yfVxuICAgICAgICAgIG9uQ2hhbmdlPXt0aGlzLmhhbmRsZUF1dGhvckNoYW5nZX1cbiAgICAgICAgLz5cbiAgICAgICAgPGlucHV0XG4gICAgICAgICAgdHlwZT1cInRleHRcIlxuICAgICAgICAgIHBsYWNlaG9sZGVyPVwiV2hhdCB5b3Ugd2FudCB0byBzYXkuLi5cIlxuICAgICAgICAgIHZhbHVlPXt0aGlzLnN0YXRlLnRleHR9XG4gICAgICAgICAgb25DaGFuZ2U9e3RoaXMuaGFuZGxlVGV4dENoYW5nZX1cbiAgICAgICAgLz5cbiAgICAgICAgPGlucHV0IHR5cGU9XCJzdWJtaXRcIiB2YWx1ZT1cIlBvc3RcIiAvPlxuICAgICAgPC9mb3JtPlxuICAgICk7XG4gIH1cbn0pO1xuY29uc3QgQ29tbWVudEJveCA9IFJlYWN0LmNyZWF0ZUNsYXNzKHtcbiAgbG9hZENvbW1lbnRzRnJvbVNlcnZlcjogZnVuY3Rpb24oKXtcbiAgICAkLmFqYXgoe1xuICAgICAgdXJsOiB0aGlzLnByb3BzLnVybCxcbiAgICAgIGRhdGFUeXBlOiAnanNvbicsXG4gICAgICBjYWNoZTogZmFsc2UsXG4gICAgICBzdWNjZXNzOiBmdW5jdGlvbihkYXRhKSB7XG4gICAgICAgIGNvbnNvbGUubG9nKGRhdGEpO1xuICAgICAgICB0aGlzLnNldFN0YXRlKHtkYXRhOiBkYXRhfSk7XG4gICAgICB9LmJpbmQodGhpcyksXG4gICAgICBlcnJvcjogZnVuY3Rpb24oeGhyLCBzdGF0dXMsIGVycikge1xuICAgICAgICBjb25zb2xlLmVycm9yKHRoaXMucHJvcHMudXJsLCBzdGF0dXMsIGVyci50b1N0cmluZygpKTtcbiAgICAgIH0uYmluZCh0aGlzKVxuICAgIH0pO1xuICB9LFxuICBoYW5kbGVDb21tZW50U3VibWl0OiBmdW5jdGlvbihjb21tZW50KXtcbiAgICAvLyBJbnNlcnQgbmV3IGNvbW1lbnQgYW5kIGRlbGV0ZSBsYXN0IG9uZVxuICAgIHRoaXMuc3RhdGUuZGF0YS5zcGxpY2UoMCwgMCwgY29tbWVudCk7XG4gICAgdGhpcy5zdGF0ZS5kYXRhLnNwbGljZSgtMSwgMSk7XG4gICAgJC5hamF4KHtcbiAgICAgIHVybDogdGhpcy5wcm9wcy5zZW5kQ29tbWVudFVybCxcbiAgICAgIGRhdGFUeXBlOiAnanNvbicsXG4gICAgICB0eXBlOiAnUE9TVCcsXG4gICAgICBkYXRhOiBKU09OLnN0cmluZ2lmeSh0aGlzLnN0YXRlLmRhdGEpLFxuICAgICAgY29udGVudFR5cGU6IFwiYXBwbGljYXRpb24vanNvblwiLFxuICAgICAgc3VjY2VzczogZnVuY3Rpb24oZGF0YSkge1xuICAgICAgICBjb25zb2xlLmxvZyhkYXRhKTtcbiAgICAgICAgY29uc29sZS5sb2coXCJBZnRlciBzZW5kaW5nIFwiICsgSlNPTi5zdHJpbmdpZnkodGhpcy5zdGF0ZS5kYXRhKSk7XG4gICAgICB9LmJpbmQodGhpcyksXG4gICAgICBlcnJvcjogZnVuY3Rpb24oeGhyLCBzdGF0dXMsIGVycikge1xuICAgICAgICBjb25zb2xlLmVycm9yKHRoaXMucHJvcHMuc2VuZENvbW1lbnRVcmwsIHN0YXR1cywgZXJyLnRvU3RyaW5nKCkpO1xuICAgICAgfS5iaW5kKHRoaXMpXG4gICAgfSk7XG4gIH0sXG4gIGdldEluaXRpYWxTdGF0ZTogZnVuY3Rpb24oKXtcbiAgICByZXR1cm4ge2RhdGE6IFtdfTtcbiAgfSxcbiAgY29tcG9uZW50RGlkTW91bnQ6IGZ1bmN0aW9uKCkge1xuICAgIHRoaXMubG9hZENvbW1lbnRzRnJvbVNlcnZlcigpO1xuICAgIHNldEludGVydmFsKHRoaXMubG9hZENvbW1lbnRzRnJvbVNlcnZlciwgdGhpcy5wcm9wcy5wb2xsSW50ZXJ2YWwpO1xuICB9LFxuICByZW5kZXI6IGZ1bmN0aW9uKCl7XG4gICAgcmV0dXJuKFxuICAgICAgPGRpdiBjbGFzc05hbWU9XCJjb21tZW50Qm94XCI+XG4gICAgICAgIDxoMT5IYXZlIHlvdXIgc2F5PC9oMT5cbiAgICAgICAgPENvbW1lbnRGb3JtIG9uQ29udGVudFN1Ym1pdD17dGhpcy5oYW5kbGVDb21tZW50U3VibWl0fS8+XG4gICAgICAgIDxDb21tZW50TGlzdCBkYXRhPXt0aGlzLnN0YXRlLmRhdGF9Lz5cbiAgICAgIDwvZGl2PlxuICAgICk7XG4gIH1cbn0pO1xuUmVhY3RET00ucmVuZGVyKFxuICA8Q29tbWVudEJveFxuICAgIHVybD1cImh0dHBzOi8vczMtZXUtd2VzdC0xLmFtYXpvbmF3cy5jb20vdGhlcG9sbGVucmVwb3J0L2NvbW1lbnRzLmpzb25cIlxuICAgIHNlbmRDb21tZW50VXJsPXtDT01NRU5UU19BUElfVVJMfVxuICAgIHBvbGxJbnRlcnZhbD17MjAwMH0vPixcbiAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2NvbW1lbnRzJylcbik7XG5cblxuXG4vKiogV0VCUEFDSyBGT09URVIgKipcbiAqKiAuL3B1YmxpYy9qcy9jb21tZW50Ym94LmpzXG4gKiovIiwibW9kdWxlLmV4cG9ydHMgPSB7IFwiZGVmYXVsdFwiOiByZXF1aXJlKFwiY29yZS1qcy9saWJyYXJ5L2ZuL2pzb24vc3RyaW5naWZ5XCIpLCBfX2VzTW9kdWxlOiB0cnVlIH07XG5cblxuLyoqKioqKioqKioqKioqKioqXG4gKiogV0VCUEFDSyBGT09URVJcbiAqKiAuL34vYmFiZWwtcnVudGltZS9jb3JlLWpzL2pzb24vc3RyaW5naWZ5LmpzXG4gKiogbW9kdWxlIGlkID0gM1xuICoqIG1vZHVsZSBjaHVua3MgPSAwXG4gKiovIiwidmFyIGNvcmUgID0gcmVxdWlyZSgnLi4vLi4vbW9kdWxlcy9fY29yZScpXG4gICwgJEpTT04gPSBjb3JlLkpTT04gfHwgKGNvcmUuSlNPTiA9IHtzdHJpbmdpZnk6IEpTT04uc3RyaW5naWZ5fSk7XG5tb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uIHN0cmluZ2lmeShpdCl7IC8vIGVzbGludC1kaXNhYmxlLWxpbmUgbm8tdW51c2VkLXZhcnNcbiAgcmV0dXJuICRKU09OLnN0cmluZ2lmeS5hcHBseSgkSlNPTiwgYXJndW1lbnRzKTtcbn07XG5cblxuLyoqKioqKioqKioqKioqKioqXG4gKiogV0VCUEFDSyBGT09URVJcbiAqKiAuL34vY29yZS1qcy9saWJyYXJ5L2ZuL2pzb24vc3RyaW5naWZ5LmpzXG4gKiogbW9kdWxlIGlkID0gNFxuICoqIG1vZHVsZSBjaHVua3MgPSAwXG4gKiovIiwidmFyIGNvcmUgPSBtb2R1bGUuZXhwb3J0cyA9IHt2ZXJzaW9uOiAnMi40LjAnfTtcbmlmKHR5cGVvZiBfX2UgPT0gJ251bWJlcicpX19lID0gY29yZTsgLy8gZXNsaW50LWRpc2FibGUtbGluZSBuby11bmRlZlxuXG5cbi8qKioqKioqKioqKioqKioqKlxuICoqIFdFQlBBQ0sgRk9PVEVSXG4gKiogLi9+L2NvcmUtanMvbGlicmFyeS9tb2R1bGVzL19jb3JlLmpzXG4gKiogbW9kdWxlIGlkID0gNVxuICoqIG1vZHVsZSBjaHVua3MgPSAwXG4gKiovIl0sInNvdXJjZVJvb3QiOiIifQ==
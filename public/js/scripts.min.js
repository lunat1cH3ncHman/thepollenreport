!function(t){function e(a){if(n[a])return n[a].exports;var o=n[a]={exports:{},id:a,loaded:!1};return t[a].call(o.exports,o,o.exports,e),o.loaded=!0,o.exports}var n={};return e.m=t,e.c=n,e.p="",e(0)}([function(t,e,n){n(5),n(1)},function(t,e,n){"use strict";function a(t){return t&&t.__esModule?t:{"default":t}}var o=n(2),r=a(o),s=React.createClass({displayName:"Comment",render:function(){return React.createElement("div",{className:"comment"},React.createElement("p",null,this.props.author," says - ",this.props.children))}}),i=React.createClass({displayName:"CommentList",render:function(){var t=this.props.data.map(function(t){return React.createElement(s,{author:t.author,key:t.id},t.text)});return React.createElement("div",{className:"commentList"},t)}}),c=React.createClass({displayName:"CommentForm",getInitialState:function(){return{author:"",text:""}},handleAuthorChange:function(t){this.setState({author:t.target.value})},handleTextChange:function(t){this.setState({text:t.target.value})},handleSubmit:function(t){t.preventDefault();var e=this.state.author.trim(),n=this.state.text.trim();if(n&&e){var a=Date.now();this.props.onContentSubmit({id:a.toString(),author:e,text:n}),this.setState({author:"",text:""})}},render:function(){return React.createElement("form",{className:"commentForm",onSubmit:this.handleSubmit},React.createElement("input",{type:"text",placeholder:"Your name",value:this.state.author,onChange:this.handleAuthorChange}),React.createElement("input",{type:"text",placeholder:"What you want to say...",value:this.state.text,onChange:this.handleTextChange}),React.createElement("input",{type:"submit",value:"Post"}))}}),l=React.createClass({displayName:"CommentBox",loadCommentsFromServer:function(){$.ajax({url:this.props.url,dataType:"json",cache:!1,success:function(t){console.log(t),this.setState({data:t})}.bind(this),error:function(t,e,n){console.error(this.props.url,e,n.toString())}.bind(this)})},handleCommentSubmit:function(t){this.state.data.splice(0,0,t),this.state.data.splice(-1,1),$.ajax({url:this.props.sendCommentUrl,dataType:"json",type:"POST",data:(0,r["default"])(this.state.data),contentType:"application/json",success:function(t){console.log(t),console.log("After sending "+(0,r["default"])(this.state.data))}.bind(this),error:function(t,e,n){console.error(this.props.sendCommentUrl,e,n.toString())}.bind(this)})},getInitialState:function(){return{data:[]}},componentDidMount:function(){this.loadCommentsFromServer(),setInterval(this.loadCommentsFromServer,this.props.pollInterval)},render:function(){return React.createElement("div",{className:"commentBox"},React.createElement("h1",null,"Have your say"),React.createElement(c,{onContentSubmit:this.handleCommentSubmit}),React.createElement(i,{data:this.state.data}))}});ReactDOM.render(React.createElement(l,{url:"https://s3-eu-west-1.amazonaws.com/thepollenreport/comments.json",sendCommentUrl:"http://localhost:3000/api/v1/comments",pollInterval:2e3}),document.getElementById("comments"))},function(t,e,n){t.exports={"default":n(3),__esModule:!0}},function(t,e,n){var a=n(4),o=a.JSON||(a.JSON={stringify:JSON.stringify});t.exports=function(t){return o.stringify.apply(o,arguments)}},function(t,e){var n=t.exports={version:"2.4.0"};"number"==typeof __e&&(__e=n)},function(t,e){$(document).ready(function(){$.get("https://s3-eu-west-1.amazonaws.com/thepollenreport/pollen.json").done(function(t){t=JSON.parse(t);const e=t.count;$(".mega").text(e)}).fail(function(){$(".mega").text("Unknown"),$(".main").append("<p>Refresh to try again</p>")}).always(function(){})})}]);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vc2NyaXB0cy5taW4uanMiLCJ3ZWJwYWNrOi8vL3dlYnBhY2svYm9vdHN0cmFwIGZhNjI5ZWMzZmFmMjM3MDYzZTZlIiwid2VicGFjazovLy8uL3B1YmxpYy9qcy9zY3JpcHRzLmpzIiwid2VicGFjazovLy8uL3B1YmxpYy9qcy9jb21tZW50Ym94LmpzIiwid2VicGFjazovLy8uL34vYmFiZWwtcnVudGltZS9jb3JlLWpzL2pzb24vc3RyaW5naWZ5LmpzIiwid2VicGFjazovLy8uL34vY29yZS1qcy9saWJyYXJ5L2ZuL2pzb24vc3RyaW5naWZ5LmpzIiwid2VicGFjazovLy8uL34vY29yZS1qcy9saWJyYXJ5L21vZHVsZXMvX2NvcmUuanMiLCJ3ZWJwYWNrOi8vLy4vcHVibGljL2pzL21haW4uanMiXSwibmFtZXMiOlsibW9kdWxlcyIsIl9fd2VicGFja19yZXF1aXJlX18iLCJtb2R1bGVJZCIsImluc3RhbGxlZE1vZHVsZXMiLCJleHBvcnRzIiwibW9kdWxlIiwiaWQiLCJsb2FkZWQiLCJjYWxsIiwibSIsImMiLCJwIiwiX2ludGVyb3BSZXF1aXJlRGVmYXVsdCIsIm9iaiIsIl9fZXNNb2R1bGUiLCJkZWZhdWx0IiwiX3N0cmluZ2lmeSIsIl9zdHJpbmdpZnkyIiwiQ29tbWVudCIsIlJlYWN0IiwiY3JlYXRlQ2xhc3MiLCJkaXNwbGF5TmFtZSIsInJlbmRlciIsImNyZWF0ZUVsZW1lbnQiLCJjbGFzc05hbWUiLCJ0aGlzIiwicHJvcHMiLCJhdXRob3IiLCJjaGlsZHJlbiIsIkNvbW1lbnRMaXN0IiwiY29tbWVudE5vZGVzIiwiZGF0YSIsIm1hcCIsImNvbW1lbnQiLCJrZXkiLCJ0ZXh0IiwiQ29tbWVudEZvcm0iLCJnZXRJbml0aWFsU3RhdGUiLCJoYW5kbGVBdXRob3JDaGFuZ2UiLCJlIiwic2V0U3RhdGUiLCJ0YXJnZXQiLCJ2YWx1ZSIsImhhbmRsZVRleHRDaGFuZ2UiLCJoYW5kbGVTdWJtaXQiLCJwcmV2ZW50RGVmYXVsdCIsInN0YXRlIiwidHJpbSIsIkRhdGUiLCJub3ciLCJvbkNvbnRlbnRTdWJtaXQiLCJ0b1N0cmluZyIsIm9uU3VibWl0IiwidHlwZSIsInBsYWNlaG9sZGVyIiwib25DaGFuZ2UiLCJDb21tZW50Qm94IiwibG9hZENvbW1lbnRzRnJvbVNlcnZlciIsIiQiLCJhamF4IiwidXJsIiwiZGF0YVR5cGUiLCJjYWNoZSIsInN1Y2Nlc3MiLCJjb25zb2xlIiwibG9nIiwiYmluZCIsImVycm9yIiwieGhyIiwic3RhdHVzIiwiZXJyIiwiaGFuZGxlQ29tbWVudFN1Ym1pdCIsInNwbGljZSIsInNlbmRDb21tZW50VXJsIiwiY29udGVudFR5cGUiLCJjb21wb25lbnREaWRNb3VudCIsInNldEludGVydmFsIiwicG9sbEludGVydmFsIiwiUmVhY3RET00iLCJkb2N1bWVudCIsImdldEVsZW1lbnRCeUlkIiwiY29yZSIsIiRKU09OIiwiSlNPTiIsInN0cmluZ2lmeSIsIml0IiwiYXBwbHkiLCJhcmd1bWVudHMiLCJ2ZXJzaW9uIiwiX19lIiwicmVhZHkiLCJnZXQiLCJkb25lIiwicGFyc2UiLCJwb2xsZW4iLCJjb3VudCIsImZhaWwiLCJhcHBlbmQiLCJhbHdheXMiXSwibWFwcGluZ3MiOiJDQUFTLFNBQVVBLEdDSW5CLFFBQUFDLEdBQUFDLEdBR0EsR0FBQUMsRUFBQUQsR0FDQSxNQUFBQyxHQUFBRCxHQUFBRSxPQUdBLElBQUFDLEdBQUFGLEVBQUFELElBQ0FFLFdBQ0FFLEdBQUFKLEVBQ0FLLFFBQUEsRUFVQSxPQU5BUCxHQUFBRSxHQUFBTSxLQUFBSCxFQUFBRCxRQUFBQyxJQUFBRCxRQUFBSCxHQUdBSSxFQUFBRSxRQUFBLEVBR0FGLEVBQUFELFFBdkJBLEdBQUFELEtBcUNBLE9BVEFGLEdBQUFRLEVBQUFULEVBR0FDLEVBQUFTLEVBQUFQLEVBR0FGLEVBQUFVLEVBQUEsR0FHQVYsRUFBQSxLRE1NLFNBQVNJLEVBQVFELEVBQVNILEdFNUNoQ0EsRUFBQSxHQUNBQSxFQUFBLElGbURNLFNBQVNJLEVBQVFELEVBQVNILEdB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QUFBdkIsS0FBQSxXQUNBdUIsRUFBQSxTQUFBdUMsT0FBQSxpQ0FHQUMsT0FBQSIsImZpbGUiOiJzY3JpcHRzLm1pbi5qcyIsInNvdXJjZXNDb250ZW50IjpbIi8qKioqKiovIChmdW5jdGlvbihtb2R1bGVzKSB7IC8vIHdlYnBhY2tCb290c3RyYXBcbi8qKioqKiovIFx0Ly8gVGhlIG1vZHVsZSBjYWNoZVxuLyoqKioqKi8gXHR2YXIgaW5zdGFsbGVkTW9kdWxlcyA9IHt9O1xuLyoqKioqKi9cbi8qKioqKiovIFx0Ly8gVGhlIHJlcXVpcmUgZnVuY3Rpb25cbi8qKioqKiovIFx0ZnVuY3Rpb24gX193ZWJwYWNrX3JlcXVpcmVfXyhtb2R1bGVJZCkge1xuLyoqKioqKi9cbi8qKioqKiovIFx0XHQvLyBDaGVjayBpZiBtb2R1bGUgaXMgaW4gY2FjaGVcbi8qKioqKiovIFx0XHRpZihpbnN0YWxsZWRNb2R1bGVzW21vZHVsZUlkXSlcbi8qKioqKiovIFx0XHRcdHJldHVybiBpbnN0YWxsZWRNb2R1bGVzW21vZHVsZUlkXS5leHBvcnRzO1xuLyoqKioqKi9cbi8qKioqKiovIFx0XHQvLyBDcmVhdGUgYSBuZXcgbW9kdWxlIChhbmQgcHV0IGl0IGludG8gdGhlIGNhY2hlKVxuLyoqKioqKi8gXHRcdHZhciBtb2R1bGUgPSBpbnN0YWxsZWRNb2R1bGVzW21vZHVsZUlkXSA9IHtcbi8qKioqKiovIFx0XHRcdGV4cG9ydHM6IHt9LFxuLyoqKioqKi8gXHRcdFx0aWQ6IG1vZHVsZUlkLFxuLyoqKioqKi8gXHRcdFx0bG9hZGVkOiBmYWxzZVxuLyoqKioqKi8gXHRcdH07XG4vKioqKioqL1xuLyoqKioqKi8gXHRcdC8vIEV4ZWN1dGUgdGhlIG1vZHVsZSBmdW5jdGlvblxuLyoqKioqKi8gXHRcdG1vZHVsZXNbbW9kdWxlSWRdLmNhbGwobW9kdWxlLmV4cG9ydHMsIG1vZHVsZSwgbW9kdWxlLmV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pO1xuLyoqKioqKi9cbi8qKioqKiovIFx0XHQvLyBGbGFnIHRoZSBtb2R1bGUgYXMgbG9hZGVkXG4vKioqKioqLyBcdFx0bW9kdWxlLmxvYWRlZCA9IHRydWU7XG4vKioqKioqL1xuLyoqKioqKi8gXHRcdC8vIFJldHVybiB0aGUgZXhwb3J0cyBvZiB0aGUgbW9kdWxlXG4vKioqKioqLyBcdFx0cmV0dXJuIG1vZHVsZS5leHBvcnRzO1xuLyoqKioqKi8gXHR9XG4vKioqKioqL1xuLyoqKioqKi9cbi8qKioqKiovIFx0Ly8gZXhwb3NlIHRoZSBtb2R1bGVzIG9iamVjdCAoX193ZWJwYWNrX21vZHVsZXNfXylcbi8qKioqKiovIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5tID0gbW9kdWxlcztcbi8qKioqKiovXG4vKioqKioqLyBcdC8vIGV4cG9zZSB0aGUgbW9kdWxlIGNhY2hlXG4vKioqKioqLyBcdF9fd2VicGFja19yZXF1aXJlX18uYyA9IGluc3RhbGxlZE1vZHVsZXM7XG4vKioqKioqL1xuLyoqKioqKi8gXHQvLyBfX3dlYnBhY2tfcHVibGljX3BhdGhfX1xuLyoqKioqKi8gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLnAgPSBcIlwiO1xuLyoqKioqKi9cbi8qKioqKiovIFx0Ly8gTG9hZCBlbnRyeSBtb2R1bGUgYW5kIHJldHVybiBleHBvcnRzXG4vKioqKioqLyBcdHJldHVybiBfX3dlYnBhY2tfcmVxdWlyZV9fKDApO1xuLyoqKioqKi8gfSlcbi8qKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKiovXG4vKioqKioqLyAoW1xuLyogMCAqL1xuLyoqKi8gZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblx0X193ZWJwYWNrX3JlcXVpcmVfXyAoNSk7XG5cdF9fd2VicGFja19yZXF1aXJlX18gKDEpO1xuXG5cbi8qKiovIH0sXG4vKiAxICovXG4vKioqLyBmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXHRcInVzZSBzdHJpY3RcIjtcblx0XG5cdHZhciBfc3RyaW5naWZ5ID0gX193ZWJwYWNrX3JlcXVpcmVfXygyKTtcblx0XG5cdHZhciBfc3RyaW5naWZ5MiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX3N0cmluZ2lmeSk7XG5cdFxuXHRmdW5jdGlvbiBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KG9iaikgeyByZXR1cm4gb2JqICYmIG9iai5fX2VzTW9kdWxlID8gb2JqIDogeyBkZWZhdWx0OiBvYmogfTsgfVxuXHRcblx0Ly9jb21tZW50Ym94LmpzXG5cdC8qIGVzbGludC1kaXNhYmxlIG5vLXVuZGVmICovXG5cdC8qIGVzbGludC1kaXNhYmxlIG5vLXVudXNlZC12YXJzKi9cblx0dmFyIENvbW1lbnQgPSBSZWFjdC5jcmVhdGVDbGFzcyh7XG5cdCAgZGlzcGxheU5hbWU6IFwiQ29tbWVudFwiLFxuXHRcblx0ICByZW5kZXI6IGZ1bmN0aW9uIHJlbmRlcigpIHtcblx0ICAgIHJldHVybiBSZWFjdC5jcmVhdGVFbGVtZW50KFxuXHQgICAgICBcImRpdlwiLFxuXHQgICAgICB7IGNsYXNzTmFtZTogXCJjb21tZW50XCIgfSxcblx0ICAgICAgUmVhY3QuY3JlYXRlRWxlbWVudChcblx0ICAgICAgICBcInBcIixcblx0ICAgICAgICBudWxsLFxuXHQgICAgICAgIHRoaXMucHJvcHMuYXV0aG9yLFxuXHQgICAgICAgIFwiIHNheXMgLSBcIixcblx0ICAgICAgICB0aGlzLnByb3BzLmNoaWxkcmVuXG5cdCAgICAgIClcblx0ICAgICk7XG5cdCAgfVxuXHR9KTtcblx0dmFyIENvbW1lbnRMaXN0ID0gUmVhY3QuY3JlYXRlQ2xhc3Moe1xuXHQgIGRpc3BsYXlOYW1lOiBcIkNvbW1lbnRMaXN0XCIsXG5cdFxuXHQgIHJlbmRlcjogZnVuY3Rpb24gcmVuZGVyKCkge1xuXHQgICAgdmFyIGNvbW1lbnROb2RlcyA9IHRoaXMucHJvcHMuZGF0YS5tYXAoZnVuY3Rpb24gKGNvbW1lbnQpIHtcblx0ICAgICAgcmV0dXJuIFJlYWN0LmNyZWF0ZUVsZW1lbnQoXG5cdCAgICAgICAgQ29tbWVudCxcblx0ICAgICAgICB7IGF1dGhvcjogY29tbWVudC5hdXRob3IsIGtleTogY29tbWVudC5pZCB9LFxuXHQgICAgICAgIGNvbW1lbnQudGV4dFxuXHQgICAgICApO1xuXHQgICAgfSk7XG5cdCAgICByZXR1cm4gUmVhY3QuY3JlYXRlRWxlbWVudChcblx0ICAgICAgXCJkaXZcIixcblx0ICAgICAgeyBjbGFzc05hbWU6IFwiY29tbWVudExpc3RcIiB9LFxuXHQgICAgICBjb21tZW50Tm9kZXNcblx0ICAgICk7XG5cdCAgfVxuXHR9KTtcblx0dmFyIENvbW1lbnRGb3JtID0gUmVhY3QuY3JlYXRlQ2xhc3Moe1xuXHQgIGRpc3BsYXlOYW1lOiBcIkNvbW1lbnRGb3JtXCIsXG5cdFxuXHQgIGdldEluaXRpYWxTdGF0ZTogZnVuY3Rpb24gZ2V0SW5pdGlhbFN0YXRlKCkge1xuXHQgICAgcmV0dXJuIHsgYXV0aG9yOiAnJywgdGV4dDogJycgfTtcblx0ICB9LFxuXHQgIGhhbmRsZUF1dGhvckNoYW5nZTogZnVuY3Rpb24gaGFuZGxlQXV0aG9yQ2hhbmdlKGUpIHtcblx0ICAgIHRoaXMuc2V0U3RhdGUoeyBhdXRob3I6IGUudGFyZ2V0LnZhbHVlIH0pO1xuXHQgIH0sXG5cdCAgaGFuZGxlVGV4dENoYW5nZTogZnVuY3Rpb24gaGFuZGxlVGV4dENoYW5nZShlKSB7XG5cdCAgICB0aGlzLnNldFN0YXRlKHsgdGV4dDogZS50YXJnZXQudmFsdWUgfSk7XG5cdCAgfSxcblx0ICBoYW5kbGVTdWJtaXQ6IGZ1bmN0aW9uIGhhbmRsZVN1Ym1pdChlKSB7XG5cdCAgICAvL1N0b3AgYnJvd3NlciBkZWZhdWx0IHN1Ym1pdFxuXHQgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuXHQgICAgdmFyIGF1dGhvciA9IHRoaXMuc3RhdGUuYXV0aG9yLnRyaW0oKTtcblx0ICAgIHZhciB0ZXh0ID0gdGhpcy5zdGF0ZS50ZXh0LnRyaW0oKTtcblx0ICAgIGlmICghdGV4dCB8fCAhYXV0aG9yKSB7XG5cdCAgICAgIHJldHVybjtcblx0ICAgIH1cblx0ICAgIHZhciBpZCA9IERhdGUubm93KCk7XG5cdCAgICB0aGlzLnByb3BzLm9uQ29udGVudFN1Ym1pdCh7IGlkOiBpZC50b1N0cmluZygpLCBhdXRob3I6IGF1dGhvciwgdGV4dDogdGV4dCB9KTtcblx0ICAgIHRoaXMuc2V0U3RhdGUoeyBhdXRob3I6ICcnLCB0ZXh0OiAnJyB9KTtcblx0ICB9LFxuXHQgIHJlbmRlcjogZnVuY3Rpb24gcmVuZGVyKCkge1xuXHQgICAgcmV0dXJuIFJlYWN0LmNyZWF0ZUVsZW1lbnQoXG5cdCAgICAgIFwiZm9ybVwiLFxuXHQgICAgICB7IGNsYXNzTmFtZTogXCJjb21tZW50Rm9ybVwiLCBvblN1Ym1pdDogdGhpcy5oYW5kbGVTdWJtaXQgfSxcblx0ICAgICAgUmVhY3QuY3JlYXRlRWxlbWVudChcImlucHV0XCIsIHtcblx0ICAgICAgICB0eXBlOiBcInRleHRcIixcblx0ICAgICAgICBwbGFjZWhvbGRlcjogXCJZb3VyIG5hbWVcIixcblx0ICAgICAgICB2YWx1ZTogdGhpcy5zdGF0ZS5hdXRob3IsXG5cdCAgICAgICAgb25DaGFuZ2U6IHRoaXMuaGFuZGxlQXV0aG9yQ2hhbmdlXG5cdCAgICAgIH0pLFxuXHQgICAgICBSZWFjdC5jcmVhdGVFbGVtZW50KFwiaW5wdXRcIiwge1xuXHQgICAgICAgIHR5cGU6IFwidGV4dFwiLFxuXHQgICAgICAgIHBsYWNlaG9sZGVyOiBcIldoYXQgeW91IHdhbnQgdG8gc2F5Li4uXCIsXG5cdCAgICAgICAgdmFsdWU6IHRoaXMuc3RhdGUudGV4dCxcblx0ICAgICAgICBvbkNoYW5nZTogdGhpcy5oYW5kbGVUZXh0Q2hhbmdlXG5cdCAgICAgIH0pLFxuXHQgICAgICBSZWFjdC5jcmVhdGVFbGVtZW50KFwiaW5wdXRcIiwgeyB0eXBlOiBcInN1Ym1pdFwiLCB2YWx1ZTogXCJQb3N0XCIgfSlcblx0ICAgICk7XG5cdCAgfVxuXHR9KTtcblx0dmFyIENvbW1lbnRCb3ggPSBSZWFjdC5jcmVhdGVDbGFzcyh7XG5cdCAgZGlzcGxheU5hbWU6IFwiQ29tbWVudEJveFwiLFxuXHRcblx0ICBsb2FkQ29tbWVudHNGcm9tU2VydmVyOiBmdW5jdGlvbiBsb2FkQ29tbWVudHNGcm9tU2VydmVyKCkge1xuXHQgICAgJC5hamF4KHtcblx0ICAgICAgdXJsOiB0aGlzLnByb3BzLnVybCxcblx0ICAgICAgZGF0YVR5cGU6ICdqc29uJyxcblx0ICAgICAgY2FjaGU6IGZhbHNlLFxuXHQgICAgICBzdWNjZXNzOiBmdW5jdGlvbiAoZGF0YSkge1xuXHQgICAgICAgIGNvbnNvbGUubG9nKGRhdGEpO1xuXHQgICAgICAgIHRoaXMuc2V0U3RhdGUoeyBkYXRhOiBkYXRhIH0pO1xuXHQgICAgICB9LmJpbmQodGhpcyksXG5cdCAgICAgIGVycm9yOiBmdW5jdGlvbiAoeGhyLCBzdGF0dXMsIGVycikge1xuXHQgICAgICAgIGNvbnNvbGUuZXJyb3IodGhpcy5wcm9wcy51cmwsIHN0YXR1cywgZXJyLnRvU3RyaW5nKCkpO1xuXHQgICAgICB9LmJpbmQodGhpcylcblx0ICAgIH0pO1xuXHQgIH0sXG5cdCAgaGFuZGxlQ29tbWVudFN1Ym1pdDogZnVuY3Rpb24gaGFuZGxlQ29tbWVudFN1Ym1pdChjb21tZW50KSB7XG5cdCAgICAvLyBJbnNlcnQgbmV3IGNvbW1lbnQgYW5kIGRlbGV0ZSBsYXN0IG9uZVxuXHQgICAgdGhpcy5zdGF0ZS5kYXRhLnNwbGljZSgwLCAwLCBjb21tZW50KTtcblx0ICAgIHRoaXMuc3RhdGUuZGF0YS5zcGxpY2UoLTEsIDEpO1xuXHQgICAgJC5hamF4KHtcblx0ICAgICAgdXJsOiB0aGlzLnByb3BzLnNlbmRDb21tZW50VXJsLFxuXHQgICAgICBkYXRhVHlwZTogJ2pzb24nLFxuXHQgICAgICB0eXBlOiAnUE9TVCcsXG5cdCAgICAgIGRhdGE6ICgwLCBfc3RyaW5naWZ5Mi5kZWZhdWx0KSh0aGlzLnN0YXRlLmRhdGEpLFxuXHQgICAgICBjb250ZW50VHlwZTogXCJhcHBsaWNhdGlvbi9qc29uXCIsXG5cdCAgICAgIHN1Y2Nlc3M6IGZ1bmN0aW9uIChkYXRhKSB7XG5cdCAgICAgICAgY29uc29sZS5sb2coZGF0YSk7XG5cdCAgICAgICAgY29uc29sZS5sb2coXCJBZnRlciBzZW5kaW5nIFwiICsgKDAsIF9zdHJpbmdpZnkyLmRlZmF1bHQpKHRoaXMuc3RhdGUuZGF0YSkpO1xuXHQgICAgICB9LmJpbmQodGhpcyksXG5cdCAgICAgIGVycm9yOiBmdW5jdGlvbiAoeGhyLCBzdGF0dXMsIGVycikge1xuXHQgICAgICAgIGNvbnNvbGUuZXJyb3IodGhpcy5wcm9wcy5zZW5kQ29tbWVudFVybCwgc3RhdHVzLCBlcnIudG9TdHJpbmcoKSk7XG5cdCAgICAgIH0uYmluZCh0aGlzKVxuXHQgICAgfSk7XG5cdCAgfSxcblx0ICBnZXRJbml0aWFsU3RhdGU6IGZ1bmN0aW9uIGdldEluaXRpYWxTdGF0ZSgpIHtcblx0ICAgIHJldHVybiB7IGRhdGE6IFtdIH07XG5cdCAgfSxcblx0ICBjb21wb25lbnREaWRNb3VudDogZnVuY3Rpb24gY29tcG9uZW50RGlkTW91bnQoKSB7XG5cdCAgICB0aGlzLmxvYWRDb21tZW50c0Zyb21TZXJ2ZXIoKTtcblx0ICAgIHNldEludGVydmFsKHRoaXMubG9hZENvbW1lbnRzRnJvbVNlcnZlciwgdGhpcy5wcm9wcy5wb2xsSW50ZXJ2YWwpO1xuXHQgIH0sXG5cdCAgcmVuZGVyOiBmdW5jdGlvbiByZW5kZXIoKSB7XG5cdCAgICByZXR1cm4gUmVhY3QuY3JlYXRlRWxlbWVudChcblx0ICAgICAgXCJkaXZcIixcblx0ICAgICAgeyBjbGFzc05hbWU6IFwiY29tbWVudEJveFwiIH0sXG5cdCAgICAgIFJlYWN0LmNyZWF0ZUVsZW1lbnQoXG5cdCAgICAgICAgXCJoMVwiLFxuXHQgICAgICAgIG51bGwsXG5cdCAgICAgICAgXCJIYXZlIHlvdXIgc2F5XCJcblx0ICAgICAgKSxcblx0ICAgICAgUmVhY3QuY3JlYXRlRWxlbWVudChDb21tZW50Rm9ybSwgeyBvbkNvbnRlbnRTdWJtaXQ6IHRoaXMuaGFuZGxlQ29tbWVudFN1Ym1pdCB9KSxcblx0ICAgICAgUmVhY3QuY3JlYXRlRWxlbWVudChDb21tZW50TGlzdCwgeyBkYXRhOiB0aGlzLnN0YXRlLmRhdGEgfSlcblx0ICAgICk7XG5cdCAgfVxuXHR9KTtcblx0UmVhY3RET00ucmVuZGVyKFJlYWN0LmNyZWF0ZUVsZW1lbnQoQ29tbWVudEJveCwge1xuXHQgIHVybDogXCJodHRwczovL3MzLWV1LXdlc3QtMS5hbWF6b25hd3MuY29tL3RoZXBvbGxlbnJlcG9ydC9jb21tZW50cy5qc29uXCIsXG5cdCAgc2VuZENvbW1lbnRVcmw6IChcImh0dHA6Ly9sb2NhbGhvc3Q6MzAwMC9hcGkvdjEvY29tbWVudHNcIiksXG5cdCAgcG9sbEludGVydmFsOiAyMDAwIH0pLCBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnY29tbWVudHMnKSk7XG5cbi8qKiovIH0sXG4vKiAyICovXG4vKioqLyBmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXHRtb2R1bGUuZXhwb3J0cyA9IHsgXCJkZWZhdWx0XCI6IF9fd2VicGFja19yZXF1aXJlX18oMyksIF9fZXNNb2R1bGU6IHRydWUgfTtcblxuLyoqKi8gfSxcbi8qIDMgKi9cbi8qKiovIGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cdHZhciBjb3JlICA9IF9fd2VicGFja19yZXF1aXJlX18oNClcblx0ICAsICRKU09OID0gY29yZS5KU09OIHx8IChjb3JlLkpTT04gPSB7c3RyaW5naWZ5OiBKU09OLnN0cmluZ2lmeX0pO1xuXHRtb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uIHN0cmluZ2lmeShpdCl7IC8vIGVzbGludC1kaXNhYmxlLWxpbmUgbm8tdW51c2VkLXZhcnNcblx0ICByZXR1cm4gJEpTT04uc3RyaW5naWZ5LmFwcGx5KCRKU09OLCBhcmd1bWVudHMpO1xuXHR9O1xuXG4vKioqLyB9LFxuLyogNCAqL1xuLyoqKi8gZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzKSB7XG5cblx0dmFyIGNvcmUgPSBtb2R1bGUuZXhwb3J0cyA9IHt2ZXJzaW9uOiAnMi40LjAnfTtcblx0aWYodHlwZW9mIF9fZSA9PSAnbnVtYmVyJylfX2UgPSBjb3JlOyAvLyBlc2xpbnQtZGlzYWJsZS1saW5lIG5vLXVuZGVmXG5cbi8qKiovIH0sXG4vKiA1ICovXG4vKioqLyBmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMpIHtcblxuXHQvLyBtYWluLmpzXG5cdC8qIGVzbGludC1kaXNhYmxlIG5vLXVuZGVmICovXG5cdCQoZG9jdW1lbnQpLnJlYWR5KGZ1bmN0aW9uKCkge1xuXHRcblx0ICAgIC8vIGZpbmQgdGhlIFVSTCBvZiB5b3VyIEpTT04gZmlsZSBvbiBBV1MgLSBpdCdsbCBiZSBpbiB5b3VyIGJ1Y2tldFxuXHQgICAgLy8gYW5kIGxvb2sgc29tZXRoaW5nIGxpa2UgaHR0cHM6Ly9zMy1ldS13ZXN0LTEuYW1hem9uYXdzLmNvbS9bYnVja2V0IG5hbWVdL3BvbGxlbi5qc29uXG5cdCAgICAvLyB3ZSBsb2FkIHRoZSBKU09OIGZpbGUgdXNpbmcgalF1ZXJ5J3MgQUpBWFxuXHQgICAgJC5nZXQoXCJodHRwczovL3MzLWV1LXdlc3QtMS5hbWF6b25hd3MuY29tL3RoZXBvbGxlbnJlcG9ydC9wb2xsZW4uanNvblwiKVxuXHRcblx0ICAgIC8vIE9uY2Ugd2UgaGF2ZSB0aGUgZGF0YSwgd2UgcGFyc2UgaXQgdG8gZmluZCB0aGUgcG9sbGVuIGNvdW50XG5cdCAgICAuZG9uZShmdW5jdGlvbihkYXRhKSB7XG5cdCAgICAgICAgZGF0YSA9IEpTT04ucGFyc2UoZGF0YSk7XG5cdCAgICAgICAgY29uc3QgcG9sbGVuID0gZGF0YS5jb3VudDtcblx0XG5cdCAgICAgICAgLy8gdXBkYXRlIHRoZSA8aDEgY2xhc3M9XCJtZWdhXCI+IHdpdGggdGhlIHBvbGxlbiBjb3VudFxuXHQgICAgICAgICQoJy5tZWdhJykudGV4dChwb2xsZW4pO1xuXHQgICAgfSlcblx0XG5cdCAgICAvLyBpZiB3ZSBjb3VsZG4ndCBnZXQgdGhlIGRhdGEgZnJvbSBBV1MsIGRpc3BsYXkgYW4gZXJyb3IgbWVzc2FnZVxuXHQgICAgLmZhaWwoZnVuY3Rpb24oKSB7XG5cdCAgICAgICAgJCgnLm1lZ2EnKS50ZXh0KCdVbmtub3duJyk7XG5cdCAgICAgICAgJCgnLm1haW4nKS5hcHBlbmQoJzxwPlJlZnJlc2ggdG8gdHJ5IGFnYWluPC9wPicpO1xuXHQgICAgfSlcblx0XG5cdCAgICAuYWx3YXlzKGZ1bmN0aW9uKCkge1xuXHQgICAgICAgIC8vIGlmIHlvdSdyZSB1c2luZyBhIGxvYWRpbmcgZ2lmLCB0aGlzIGlzIHdoZXJlIHlvdSdkIGhpZGUgaXRcblx0ICAgIH0pO1xuXHR9KTtcblxuXG4vKioqLyB9XG4vKioqKioqLyBdKTtcblxuXG4vKiogV0VCUEFDSyBGT09URVIgKipcbiAqKiBzY3JpcHRzLm1pbi5qc1xuICoqLyIsIiBcdC8vIFRoZSBtb2R1bGUgY2FjaGVcbiBcdHZhciBpbnN0YWxsZWRNb2R1bGVzID0ge307XG5cbiBcdC8vIFRoZSByZXF1aXJlIGZ1bmN0aW9uXG4gXHRmdW5jdGlvbiBfX3dlYnBhY2tfcmVxdWlyZV9fKG1vZHVsZUlkKSB7XG5cbiBcdFx0Ly8gQ2hlY2sgaWYgbW9kdWxlIGlzIGluIGNhY2hlXG4gXHRcdGlmKGluc3RhbGxlZE1vZHVsZXNbbW9kdWxlSWRdKVxuIFx0XHRcdHJldHVybiBpbnN0YWxsZWRNb2R1bGVzW21vZHVsZUlkXS5leHBvcnRzO1xuXG4gXHRcdC8vIENyZWF0ZSBhIG5ldyBtb2R1bGUgKGFuZCBwdXQgaXQgaW50byB0aGUgY2FjaGUpXG4gXHRcdHZhciBtb2R1bGUgPSBpbnN0YWxsZWRNb2R1bGVzW21vZHVsZUlkXSA9IHtcbiBcdFx0XHRleHBvcnRzOiB7fSxcbiBcdFx0XHRpZDogbW9kdWxlSWQsXG4gXHRcdFx0bG9hZGVkOiBmYWxzZVxuIFx0XHR9O1xuXG4gXHRcdC8vIEV4ZWN1dGUgdGhlIG1vZHVsZSBmdW5jdGlvblxuIFx0XHRtb2R1bGVzW21vZHVsZUlkXS5jYWxsKG1vZHVsZS5leHBvcnRzLCBtb2R1bGUsIG1vZHVsZS5leHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKTtcblxuIFx0XHQvLyBGbGFnIHRoZSBtb2R1bGUgYXMgbG9hZGVkXG4gXHRcdG1vZHVsZS5sb2FkZWQgPSB0cnVlO1xuXG4gXHRcdC8vIFJldHVybiB0aGUgZXhwb3J0cyBvZiB0aGUgbW9kdWxlXG4gXHRcdHJldHVybiBtb2R1bGUuZXhwb3J0cztcbiBcdH1cblxuXG4gXHQvLyBleHBvc2UgdGhlIG1vZHVsZXMgb2JqZWN0IChfX3dlYnBhY2tfbW9kdWxlc19fKVxuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5tID0gbW9kdWxlcztcblxuIFx0Ly8gZXhwb3NlIHRoZSBtb2R1bGUgY2FjaGVcbiBcdF9fd2VicGFja19yZXF1aXJlX18uYyA9IGluc3RhbGxlZE1vZHVsZXM7XG5cbiBcdC8vIF9fd2VicGFja19wdWJsaWNfcGF0aF9fXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLnAgPSBcIlwiO1xuXG4gXHQvLyBMb2FkIGVudHJ5IG1vZHVsZSBhbmQgcmV0dXJuIGV4cG9ydHNcbiBcdHJldHVybiBfX3dlYnBhY2tfcmVxdWlyZV9fKDApO1xuXG5cblxuLyoqIFdFQlBBQ0sgRk9PVEVSICoqXG4gKiogd2VicGFjay9ib290c3RyYXAgZmE2MjllYzNmYWYyMzcwNjNlNmVcbiAqKi8iLCJyZXF1aXJlICgnLi9tYWluLmpzJyk7XG5yZXF1aXJlICgnLi9jb21tZW50Ym94LmpzJyk7XG5cblxuXG4vKioqKioqKioqKioqKioqKipcbiAqKiBXRUJQQUNLIEZPT1RFUlxuICoqIC4vcHVibGljL2pzL3NjcmlwdHMuanNcbiAqKiBtb2R1bGUgaWQgPSAwXG4gKiogbW9kdWxlIGNodW5rcyA9IDBcbiAqKi8iLCIvL2NvbW1lbnRib3guanNcbi8qIGVzbGludC1kaXNhYmxlIG5vLXVuZGVmICovXG4vKiBlc2xpbnQtZGlzYWJsZSBuby11bnVzZWQtdmFycyovXG5jb25zdCBDb21tZW50ID0gUmVhY3QuY3JlYXRlQ2xhc3Moe1xuICByZW5kZXI6ZnVuY3Rpb24oKXtcbiAgICByZXR1cm4oXG4gICAgICA8ZGl2IGNsYXNzTmFtZT1cImNvbW1lbnRcIj5cbiAgICAgICAgPHA+e3RoaXMucHJvcHMuYXV0aG9yfSBzYXlzIC0ge3RoaXMucHJvcHMuY2hpbGRyZW59PC9wPlxuICAgICAgPC9kaXY+XG4gICAgKTtcbiAgfVxufSk7XG5jb25zdCBDb21tZW50TGlzdCA9IFJlYWN0LmNyZWF0ZUNsYXNzKHtcbiAgcmVuZGVyOiBmdW5jdGlvbigpe1xuICAgIGNvbnN0IGNvbW1lbnROb2RlcyA9IHRoaXMucHJvcHMuZGF0YS5tYXAoZnVuY3Rpb24oY29tbWVudCl7XG4gICAgICByZXR1cm4oXG4gICAgICAgIDxDb21tZW50IGF1dGhvcj17Y29tbWVudC5hdXRob3J9IGtleT17Y29tbWVudC5pZH0+XG4gICAgICAgICAge2NvbW1lbnQudGV4dH1cbiAgICAgICAgPC9Db21tZW50PlxuICAgICAgKTtcbiAgICB9KTtcbiAgICByZXR1cm4oXG4gICAgICA8ZGl2IGNsYXNzTmFtZT1cImNvbW1lbnRMaXN0XCI+XG4gICAgICAgIHtjb21tZW50Tm9kZXN9XG4gICAgICA8L2Rpdj5cbiAgICApO1xuICB9XG59KTtcbmNvbnN0IENvbW1lbnRGb3JtID0gUmVhY3QuY3JlYXRlQ2xhc3Moe1xuICBnZXRJbml0aWFsU3RhdGU6IGZ1bmN0aW9uKCl7XG4gICAgcmV0dXJue2F1dGhvcjogJycsIHRleHQ6ICcnfTtcbiAgfSxcbiAgaGFuZGxlQXV0aG9yQ2hhbmdlOiBmdW5jdGlvbihlKXtcbiAgICB0aGlzLnNldFN0YXRlKHthdXRob3I6IGUudGFyZ2V0LnZhbHVlfSk7XG4gIH0sXG4gIGhhbmRsZVRleHRDaGFuZ2U6IGZ1bmN0aW9uKGUpe1xuICAgIHRoaXMuc2V0U3RhdGUoe3RleHQ6IGUudGFyZ2V0LnZhbHVlfSk7XG4gIH0sXG4gIGhhbmRsZVN1Ym1pdDogZnVuY3Rpb24oZSl7XG4gICAgLy9TdG9wIGJyb3dzZXIgZGVmYXVsdCBzdWJtaXRcbiAgICBlLnByZXZlbnREZWZhdWx0KCk7XG4gICAgbGV0IGF1dGhvciA9IHRoaXMuc3RhdGUuYXV0aG9yLnRyaW0oKTtcbiAgICBsZXQgdGV4dCA9ICB0aGlzLnN0YXRlLnRleHQudHJpbSgpO1xuICAgIGlmICghdGV4dCB8fCAhYXV0aG9yKXtcbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAgbGV0IGlkID0gRGF0ZS5ub3coKTtcbiAgICB0aGlzLnByb3BzLm9uQ29udGVudFN1Ym1pdCh7aWQ6IGlkLnRvU3RyaW5nKCksIGF1dGhvcjogYXV0aG9yLCB0ZXh0OiB0ZXh0fSk7XG4gICAgdGhpcy5zZXRTdGF0ZSh7YXV0aG9yOiAnJywgdGV4dDogJyd9KTtcbiAgfSxcbiAgcmVuZGVyOiBmdW5jdGlvbigpe1xuICAgIHJldHVybihcbiAgICAgIDxmb3JtIGNsYXNzTmFtZT1cImNvbW1lbnRGb3JtXCIgb25TdWJtaXQ9e3RoaXMuaGFuZGxlU3VibWl0fT5cbiAgICAgICAgPGlucHV0XG4gICAgICAgICAgdHlwZT1cInRleHRcIlxuICAgICAgICAgIHBsYWNlaG9sZGVyPVwiWW91ciBuYW1lXCJcbiAgICAgICAgICB2YWx1ZT17dGhpcy5zdGF0ZS5hdXRob3J9XG4gICAgICAgICAgb25DaGFuZ2U9e3RoaXMuaGFuZGxlQXV0aG9yQ2hhbmdlfVxuICAgICAgICAvPlxuICAgICAgICA8aW5wdXRcbiAgICAgICAgICB0eXBlPVwidGV4dFwiXG4gICAgICAgICAgcGxhY2Vob2xkZXI9XCJXaGF0IHlvdSB3YW50IHRvIHNheS4uLlwiXG4gICAgICAgICAgdmFsdWU9e3RoaXMuc3RhdGUudGV4dH1cbiAgICAgICAgICBvbkNoYW5nZT17dGhpcy5oYW5kbGVUZXh0Q2hhbmdlfVxuICAgICAgICAvPlxuICAgICAgICA8aW5wdXQgdHlwZT1cInN1Ym1pdFwiIHZhbHVlPVwiUG9zdFwiIC8+XG4gICAgICA8L2Zvcm0+XG4gICAgKTtcbiAgfVxufSk7XG5jb25zdCBDb21tZW50Qm94ID0gUmVhY3QuY3JlYXRlQ2xhc3Moe1xuICBsb2FkQ29tbWVudHNGcm9tU2VydmVyOiBmdW5jdGlvbigpe1xuICAgICQuYWpheCh7XG4gICAgICB1cmw6IHRoaXMucHJvcHMudXJsLFxuICAgICAgZGF0YVR5cGU6ICdqc29uJyxcbiAgICAgIGNhY2hlOiBmYWxzZSxcbiAgICAgIHN1Y2Nlc3M6IGZ1bmN0aW9uKGRhdGEpIHtcbiAgICAgICAgY29uc29sZS5sb2coZGF0YSk7XG4gICAgICAgIHRoaXMuc2V0U3RhdGUoe2RhdGE6IGRhdGF9KTtcbiAgICAgIH0uYmluZCh0aGlzKSxcbiAgICAgIGVycm9yOiBmdW5jdGlvbih4aHIsIHN0YXR1cywgZXJyKSB7XG4gICAgICAgIGNvbnNvbGUuZXJyb3IodGhpcy5wcm9wcy51cmwsIHN0YXR1cywgZXJyLnRvU3RyaW5nKCkpO1xuICAgICAgfS5iaW5kKHRoaXMpXG4gICAgfSk7XG4gIH0sXG4gIGhhbmRsZUNvbW1lbnRTdWJtaXQ6IGZ1bmN0aW9uKGNvbW1lbnQpe1xuICAgIC8vIEluc2VydCBuZXcgY29tbWVudCBhbmQgZGVsZXRlIGxhc3Qgb25lXG4gICAgdGhpcy5zdGF0ZS5kYXRhLnNwbGljZSgwLCAwLCBjb21tZW50KTtcbiAgICB0aGlzLnN0YXRlLmRhdGEuc3BsaWNlKC0xLCAxKTtcbiAgICAkLmFqYXgoe1xuICAgICAgdXJsOiB0aGlzLnByb3BzLnNlbmRDb21tZW50VXJsLFxuICAgICAgZGF0YVR5cGU6ICdqc29uJyxcbiAgICAgIHR5cGU6ICdQT1NUJyxcbiAgICAgIGRhdGE6IEpTT04uc3RyaW5naWZ5KHRoaXMuc3RhdGUuZGF0YSksXG4gICAgICBjb250ZW50VHlwZTogXCJhcHBsaWNhdGlvbi9qc29uXCIsXG4gICAgICBzdWNjZXNzOiBmdW5jdGlvbihkYXRhKSB7XG4gICAgICAgIGNvbnNvbGUubG9nKGRhdGEpO1xuICAgICAgICBjb25zb2xlLmxvZyhcIkFmdGVyIHNlbmRpbmcgXCIgKyBKU09OLnN0cmluZ2lmeSh0aGlzLnN0YXRlLmRhdGEpKTtcbiAgICAgIH0uYmluZCh0aGlzKSxcbiAgICAgIGVycm9yOiBmdW5jdGlvbih4aHIsIHN0YXR1cywgZXJyKSB7XG4gICAgICAgIGNvbnNvbGUuZXJyb3IodGhpcy5wcm9wcy5zZW5kQ29tbWVudFVybCwgc3RhdHVzLCBlcnIudG9TdHJpbmcoKSk7XG4gICAgICB9LmJpbmQodGhpcylcbiAgICB9KTtcbiAgfSxcbiAgZ2V0SW5pdGlhbFN0YXRlOiBmdW5jdGlvbigpe1xuICAgIHJldHVybiB7ZGF0YTogW119O1xuICB9LFxuICBjb21wb25lbnREaWRNb3VudDogZnVuY3Rpb24oKSB7XG4gICAgdGhpcy5sb2FkQ29tbWVudHNGcm9tU2VydmVyKCk7XG4gICAgc2V0SW50ZXJ2YWwodGhpcy5sb2FkQ29tbWVudHNGcm9tU2VydmVyLCB0aGlzLnByb3BzLnBvbGxJbnRlcnZhbCk7XG4gIH0sXG4gIHJlbmRlcjogZnVuY3Rpb24oKXtcbiAgICByZXR1cm4oXG4gICAgICA8ZGl2IGNsYXNzTmFtZT1cImNvbW1lbnRCb3hcIj5cbiAgICAgICAgPGgxPkhhdmUgeW91ciBzYXk8L2gxPlxuICAgICAgICA8Q29tbWVudEZvcm0gb25Db250ZW50U3VibWl0PXt0aGlzLmhhbmRsZUNvbW1lbnRTdWJtaXR9Lz5cbiAgICAgICAgPENvbW1lbnRMaXN0IGRhdGE9e3RoaXMuc3RhdGUuZGF0YX0vPlxuICAgICAgPC9kaXY+XG4gICAgKTtcbiAgfVxufSk7XG5SZWFjdERPTS5yZW5kZXIoXG4gIDxDb21tZW50Qm94XG4gICAgdXJsPVwiaHR0cHM6Ly9zMy1ldS13ZXN0LTEuYW1hem9uYXdzLmNvbS90aGVwb2xsZW5yZXBvcnQvY29tbWVudHMuanNvblwiXG4gICAgc2VuZENvbW1lbnRVcmw9e0NPTU1FTlRTX0FQSV9VUkx9XG4gICAgcG9sbEludGVydmFsPXsyMDAwfS8+LFxuICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnY29tbWVudHMnKVxuKTtcblxuXG5cbi8qKiBXRUJQQUNLIEZPT1RFUiAqKlxuICoqIC4vcHVibGljL2pzL2NvbW1lbnRib3guanNcbiAqKi8iLCJtb2R1bGUuZXhwb3J0cyA9IHsgXCJkZWZhdWx0XCI6IHJlcXVpcmUoXCJjb3JlLWpzL2xpYnJhcnkvZm4vanNvbi9zdHJpbmdpZnlcIiksIF9fZXNNb2R1bGU6IHRydWUgfTtcblxuXG4vKioqKioqKioqKioqKioqKipcbiAqKiBXRUJQQUNLIEZPT1RFUlxuICoqIC4vfi9iYWJlbC1ydW50aW1lL2NvcmUtanMvanNvbi9zdHJpbmdpZnkuanNcbiAqKiBtb2R1bGUgaWQgPSAyXG4gKiogbW9kdWxlIGNodW5rcyA9IDBcbiAqKi8iLCJ2YXIgY29yZSAgPSByZXF1aXJlKCcuLi8uLi9tb2R1bGVzL19jb3JlJylcbiAgLCAkSlNPTiA9IGNvcmUuSlNPTiB8fCAoY29yZS5KU09OID0ge3N0cmluZ2lmeTogSlNPTi5zdHJpbmdpZnl9KTtcbm1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24gc3RyaW5naWZ5KGl0KXsgLy8gZXNsaW50LWRpc2FibGUtbGluZSBuby11bnVzZWQtdmFyc1xuICByZXR1cm4gJEpTT04uc3RyaW5naWZ5LmFwcGx5KCRKU09OLCBhcmd1bWVudHMpO1xufTtcblxuXG4vKioqKioqKioqKioqKioqKipcbiAqKiBXRUJQQUNLIEZPT1RFUlxuICoqIC4vfi9jb3JlLWpzL2xpYnJhcnkvZm4vanNvbi9zdHJpbmdpZnkuanNcbiAqKiBtb2R1bGUgaWQgPSAzXG4gKiogbW9kdWxlIGNodW5rcyA9IDBcbiAqKi8iLCJ2YXIgY29yZSA9IG1vZHVsZS5leHBvcnRzID0ge3ZlcnNpb246ICcyLjQuMCd9O1xuaWYodHlwZW9mIF9fZSA9PSAnbnVtYmVyJylfX2UgPSBjb3JlOyAvLyBlc2xpbnQtZGlzYWJsZS1saW5lIG5vLXVuZGVmXG5cblxuLyoqKioqKioqKioqKioqKioqXG4gKiogV0VCUEFDSyBGT09URVJcbiAqKiAuL34vY29yZS1qcy9saWJyYXJ5L21vZHVsZXMvX2NvcmUuanNcbiAqKiBtb2R1bGUgaWQgPSA0XG4gKiogbW9kdWxlIGNodW5rcyA9IDBcbiAqKi8iLCIvLyBtYWluLmpzXG4vKiBlc2xpbnQtZGlzYWJsZSBuby11bmRlZiAqL1xuJChkb2N1bWVudCkucmVhZHkoZnVuY3Rpb24oKSB7XG5cbiAgICAvLyBmaW5kIHRoZSBVUkwgb2YgeW91ciBKU09OIGZpbGUgb24gQVdTIC0gaXQnbGwgYmUgaW4geW91ciBidWNrZXRcbiAgICAvLyBhbmQgbG9vayBzb21ldGhpbmcgbGlrZSBodHRwczovL3MzLWV1LXdlc3QtMS5hbWF6b25hd3MuY29tL1tidWNrZXQgbmFtZV0vcG9sbGVuLmpzb25cbiAgICAvLyB3ZSBsb2FkIHRoZSBKU09OIGZpbGUgdXNpbmcgalF1ZXJ5J3MgQUpBWFxuICAgICQuZ2V0KFwiaHR0cHM6Ly9zMy1ldS13ZXN0LTEuYW1hem9uYXdzLmNvbS90aGVwb2xsZW5yZXBvcnQvcG9sbGVuLmpzb25cIilcblxuICAgIC8vIE9uY2Ugd2UgaGF2ZSB0aGUgZGF0YSwgd2UgcGFyc2UgaXQgdG8gZmluZCB0aGUgcG9sbGVuIGNvdW50XG4gICAgLmRvbmUoZnVuY3Rpb24oZGF0YSkge1xuICAgICAgICBkYXRhID0gSlNPTi5wYXJzZShkYXRhKTtcbiAgICAgICAgY29uc3QgcG9sbGVuID0gZGF0YS5jb3VudDtcblxuICAgICAgICAvLyB1cGRhdGUgdGhlIDxoMSBjbGFzcz1cIm1lZ2FcIj4gd2l0aCB0aGUgcG9sbGVuIGNvdW50XG4gICAgICAgICQoJy5tZWdhJykudGV4dChwb2xsZW4pO1xuICAgIH0pXG5cbiAgICAvLyBpZiB3ZSBjb3VsZG4ndCBnZXQgdGhlIGRhdGEgZnJvbSBBV1MsIGRpc3BsYXkgYW4gZXJyb3IgbWVzc2FnZVxuICAgIC5mYWlsKGZ1bmN0aW9uKCkge1xuICAgICAgICAkKCcubWVnYScpLnRleHQoJ1Vua25vd24nKTtcbiAgICAgICAgJCgnLm1haW4nKS5hcHBlbmQoJzxwPlJlZnJlc2ggdG8gdHJ5IGFnYWluPC9wPicpO1xuICAgIH0pXG5cbiAgICAuYWx3YXlzKGZ1bmN0aW9uKCkge1xuICAgICAgICAvLyBpZiB5b3UncmUgdXNpbmcgYSBsb2FkaW5nIGdpZiwgdGhpcyBpcyB3aGVyZSB5b3UnZCBoaWRlIGl0XG4gICAgfSk7XG59KTtcblxuXG5cbi8qKioqKioqKioqKioqKioqKlxuICoqIFdFQlBBQ0sgRk9PVEVSXG4gKiogLi9wdWJsaWMvanMvbWFpbi5qc1xuICoqIG1vZHVsZSBpZCA9IDVcbiAqKiBtb2R1bGUgY2h1bmtzID0gMFxuICoqLyJdLCJzb3VyY2VSb290IjoiIn0=
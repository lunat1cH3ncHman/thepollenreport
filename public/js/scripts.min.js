/******/ (function(modules) { // webpackBootstrap
/******/ 	// The module cache
/******/ 	var installedModules = {};
/******/
/******/ 	// The require function
/******/ 	function __webpack_require__(moduleId) {
/******/
/******/ 		// Check if module is in cache
/******/ 		if(installedModules[moduleId])
/******/ 			return installedModules[moduleId].exports;
/******/
/******/ 		// Create a new module (and put it into the cache)
/******/ 		var module = installedModules[moduleId] = {
/******/ 			exports: {},
/******/ 			id: moduleId,
/******/ 			loaded: false
/******/ 		};
/******/
/******/ 		// Execute the module function
/******/ 		modules[moduleId].call(module.exports, module, module.exports, __webpack_require__);
/******/
/******/ 		// Flag the module as loaded
/******/ 		module.loaded = true;
/******/
/******/ 		// Return the exports of the module
/******/ 		return module.exports;
/******/ 	}
/******/
/******/
/******/ 	// expose the modules object (__webpack_modules__)
/******/ 	__webpack_require__.m = modules;
/******/
/******/ 	// expose the module cache
/******/ 	__webpack_require__.c = installedModules;
/******/
/******/ 	// __webpack_public_path__
/******/ 	__webpack_require__.p = "";
/******/
/******/ 	// Load entry module and return exports
/******/ 	return __webpack_require__(0);
/******/ })
/************************************************************************/
/******/ ([
/* 0 */
/***/ function(module, exports, __webpack_require__) {

	__webpack_require__ (1);
	__webpack_require__ (2);


/***/ },
/* 1 */
/***/ function(module, exports) {

	// main.js
	/* eslint-disable no-undef */
	$(document).ready(function() {
	
	    // find the URL of your JSON file on AWS - it'll be in your bucket
	    // and look something like https://s3-eu-west-1.amazonaws.com/[bucket name]/pollen.json
	    // we load the JSON file using jQuery's AJAX
	    $.get("https://s3-eu-west-1.amazonaws.com/thepollenreport/pollen.json")
	
	    // Once we have the data, we parse it to find the pollen count
	    .done(function(data) {
	        data = JSON.parse(data);
	        const pollen = data.count;
	
	        // update the <h1 class="mega"> with the pollen count
	        $('.mega').text(pollen);
	    })
	
	    // if we couldn't get the data from AWS, display an error message
	    .fail(function() {
	        $('.mega').text('Unknown');
	        $('.main').append('<p>Refresh to try again</p>');
	    })
	
	    .always(function() {
	        // if you're using a loading gif, this is where you'd hide it
	    });
	});


/***/ },
/* 2 */
/***/ function(module, exports, __webpack_require__) {

	/* WEBPACK VAR INJECTION */(function(process) {"use strict";
	
	var _stringify = __webpack_require__(4);
	
	var _stringify2 = _interopRequireDefault(_stringify);
	
	function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }
	
	//commentbox.js
	/* eslint-disable no-undef */
	/* eslint-disable no-unused-vars*/
	var Comment = React.createClass({
	  displayName: "Comment",
	
	  render: function render() {
	    return React.createElement(
	      "div",
	      { className: "comment" },
	      React.createElement(
	        "p",
	        null,
	        this.props.author,
	        " says - ",
	        this.props.children
	      )
	    );
	  }
	});
	var CommentList = React.createClass({
	  displayName: "CommentList",
	
	  render: function render() {
	    var commentNodes = this.props.data.map(function (comment) {
	      return React.createElement(
	        Comment,
	        { author: comment.author, key: comment.id },
	        comment.text
	      );
	    });
	    return React.createElement(
	      "div",
	      { className: "commentList" },
	      commentNodes
	    );
	  }
	});
	var CommentForm = React.createClass({
	  displayName: "CommentForm",
	
	  getInitialState: function getInitialState() {
	    return { author: '', text: '' };
	  },
	  handleAuthorChange: function handleAuthorChange(e) {
	    this.setState({ author: e.target.value });
	  },
	  handleTextChange: function handleTextChange(e) {
	    this.setState({ text: e.target.value });
	  },
	  handleSubmit: function handleSubmit(e) {
	    console.log("test node dev" + process.env.NODE_DEV);
	    //Stop browser default submit
	    e.preventDefault();
	    var author = this.state.author.trim();
	    var text = this.state.text.trim();
	    if (!text || !author) {
	      return;
	    }
	    var id = Date.now();
	    this.props.onContentSubmit({ id: id.toString(), author: author, text: text });
	    this.setState({ author: '', text: '' });
	  },
	  render: function render() {
	    return React.createElement(
	      "form",
	      { className: "commentForm", onSubmit: this.handleSubmit },
	      React.createElement("input", {
	        type: "text",
	        placeholder: "Your name",
	        value: this.state.author,
	        onChange: this.handleAuthorChange
	      }),
	      React.createElement("input", {
	        type: "text",
	        placeholder: "What you want to say...",
	        value: this.state.text,
	        onChange: this.handleTextChange
	      }),
	      React.createElement("input", { type: "submit", value: "Post" })
	    );
	  }
	});
	var CommentBox = React.createClass({
	  displayName: "CommentBox",
	
	  loadCommentsFromServer: function loadCommentsFromServer() {
	    $.ajax({
	      url: this.props.url,
	      dataType: 'json',
	      cache: false,
	      success: function (data) {
	        console.log(data);
	        this.setState({ data: data });
	      }.bind(this),
	      error: function (xhr, status, err) {
	        console.error(this.props.url, status, err.toString());
	      }.bind(this)
	    });
	  },
	  handleCommentSubmit: function handleCommentSubmit(comment) {
	    // Insert new comment and delete last one
	    this.state.data.splice(0, 0, comment);
	    this.state.data.splice(-1, 1);
	    $.ajax({
	      url: this.props.sendCommentUrl,
	      dataType: 'json',
	      type: 'POST',
	      data: (0, _stringify2.default)(this.state.data),
	      contentType: "application/json",
	      success: function (data) {
	        console.log(data);
	        console.log("After sending " + (0, _stringify2.default)(this.state.data));
	      }.bind(this),
	      error: function (xhr, status, err) {
	        console.error(this.props.sendCommentUrl, status, err.toString());
	      }.bind(this)
	    });
	  },
	  getInitialState: function getInitialState() {
	    return { data: [] };
	  },
	  componentDidMount: function componentDidMount() {
	    this.loadCommentsFromServer();
	    setInterval(this.loadCommentsFromServer, this.props.pollInterval);
	  },
	  render: function render() {
	    return React.createElement(
	      "div",
	      { className: "commentBox" },
	      React.createElement(
	        "h1",
	        null,
	        "Have your say"
	      ),
	      React.createElement(CommentForm, { onContentSubmit: this.handleCommentSubmit }),
	      React.createElement(CommentList, { data: this.state.data })
	    );
	  }
	});
	ReactDOM.render(React.createElement(CommentBox, {
	  url: "https://s3-eu-west-1.amazonaws.com/thepollenreport/comments.json",
	  sendCommentUrl: ("http://localhost:3000/api/v1/comments"),
	  pollInterval: 2000 }), document.getElementById('comments'));
	/* WEBPACK VAR INJECTION */}.call(exports, __webpack_require__(3)))

/***/ },
/* 3 */
/***/ function(module, exports) {

	// shim for using process in browser
	var process = module.exports = {};
	
	// cached from whatever global is present so that test runners that stub it
	// don't break things.  But we need to wrap it in a try catch in case it is
	// wrapped in strict mode code which doesn't define any globals.  It's inside a
	// function because try/catches deoptimize in certain engines.
	
	var cachedSetTimeout;
	var cachedClearTimeout;
	
	(function () {
	    try {
	        cachedSetTimeout = setTimeout;
	    } catch (e) {
	        cachedSetTimeout = function () {
	            throw new Error('setTimeout is not defined');
	        }
	    }
	    try {
	        cachedClearTimeout = clearTimeout;
	    } catch (e) {
	        cachedClearTimeout = function () {
	            throw new Error('clearTimeout is not defined');
	        }
	    }
	} ())
	function runTimeout(fun) {
	    if (cachedSetTimeout === setTimeout) {
	        return setTimeout(fun, 0);
	    } else {
	        return cachedSetTimeout.call(null, fun, 0);
	    }
	}
	function runClearTimeout(marker) {
	    if (cachedClearTimeout === clearTimeout) {
	        clearTimeout(marker);
	    } else {
	        cachedClearTimeout.call(null, marker);
	    }
	}
	var queue = [];
	var draining = false;
	var currentQueue;
	var queueIndex = -1;
	
	function cleanUpNextTick() {
	    if (!draining || !currentQueue) {
	        return;
	    }
	    draining = false;
	    if (currentQueue.length) {
	        queue = currentQueue.concat(queue);
	    } else {
	        queueIndex = -1;
	    }
	    if (queue.length) {
	        drainQueue();
	    }
	}
	
	function drainQueue() {
	    if (draining) {
	        return;
	    }
	    var timeout = runTimeout(cleanUpNextTick);
	    draining = true;
	
	    var len = queue.length;
	    while(len) {
	        currentQueue = queue;
	        queue = [];
	        while (++queueIndex < len) {
	            if (currentQueue) {
	                currentQueue[queueIndex].run();
	            }
	        }
	        queueIndex = -1;
	        len = queue.length;
	    }
	    currentQueue = null;
	    draining = false;
	    runClearTimeout(timeout);
	}
	
	process.nextTick = function (fun) {
	    var args = new Array(arguments.length - 1);
	    if (arguments.length > 1) {
	        for (var i = 1; i < arguments.length; i++) {
	            args[i - 1] = arguments[i];
	        }
	    }
	    queue.push(new Item(fun, args));
	    if (queue.length === 1 && !draining) {
	        runTimeout(drainQueue);
	    }
	};
	
	// v8 likes predictible objects
	function Item(fun, array) {
	    this.fun = fun;
	    this.array = array;
	}
	Item.prototype.run = function () {
	    this.fun.apply(null, this.array);
	};
	process.title = 'browser';
	process.browser = true;
	process.env = {};
	process.argv = [];
	process.version = ''; // empty string to avoid regexp issues
	process.versions = {};
	
	function noop() {}
	
	process.on = noop;
	process.addListener = noop;
	process.once = noop;
	process.off = noop;
	process.removeListener = noop;
	process.removeAllListeners = noop;
	process.emit = noop;
	
	process.binding = function (name) {
	    throw new Error('process.binding is not supported');
	};
	
	process.cwd = function () { return '/' };
	process.chdir = function (dir) {
	    throw new Error('process.chdir is not supported');
	};
	process.umask = function() { return 0; };


/***/ },
/* 4 */
/***/ function(module, exports, __webpack_require__) {

	module.exports = { "default": __webpack_require__(5), __esModule: true };

/***/ },
/* 5 */
/***/ function(module, exports, __webpack_require__) {

	var core  = __webpack_require__(6)
	  , $JSON = core.JSON || (core.JSON = {stringify: JSON.stringify});
	module.exports = function stringify(it){ // eslint-disable-line no-unused-vars
	  return $JSON.stringify.apply($JSON, arguments);
	};

/***/ },
/* 6 */
/***/ function(module, exports) {

	var core = module.exports = {version: '2.4.0'};
	if(typeof __e == 'number')__e = core; // eslint-disable-line no-undef

/***/ }
/******/ ]);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vd2VicGFjay9ib290c3RyYXAgMTBkZjYzMzA4NzQ4YjRjOGNkYWEiLCJ3ZWJwYWNrOi8vLy4vcHVibGljL2pzL3NjcmlwdHMuanMiLCJ3ZWJwYWNrOi8vLy4vcHVibGljL2pzL21haW4uanMiLCJ3ZWJwYWNrOi8vLy4vcHVibGljL2pzL2NvbW1lbnRib3guanMiLCJ3ZWJwYWNrOi8vLy4vfi9wcm9jZXNzL2Jyb3dzZXIuanMiLCJ3ZWJwYWNrOi8vLy4vfi9iYWJlbC1ydW50aW1lL2NvcmUtanMvanNvbi9zdHJpbmdpZnkuanMiLCJ3ZWJwYWNrOi8vLy4vfi9jb3JlLWpzL2xpYnJhcnkvZm4vanNvbi9zdHJpbmdpZnkuanMiLCJ3ZWJwYWNrOi8vLy4vfi9jb3JlLWpzL2xpYnJhcnkvbW9kdWxlcy9fY29yZS5qcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiO0FBQUE7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0EsdUJBQWU7QUFDZjtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7O0FBR0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTs7Ozs7OztBQ3RDQTtBQUNBOzs7Ozs7O0FDREE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQSxNQUFLOztBQUVMO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsTUFBSzs7QUFFTDtBQUNBO0FBQ0EsTUFBSztBQUNMLEVBQUM7Ozs7Ozs7Ozs7Ozs7OztBQzNCRDtBQUNBO0FBQ0E7QUFDQSxLQUFNLFVBQVUsTUFBTSxXQUFOLENBQWtCO0FBQUE7O0FBQ2hDLFdBQU8sa0JBQVU7QUFDZixZQUNFO0FBQUE7QUFBQSxTQUFLLFdBQVUsU0FBZjtBQUNFO0FBQUE7QUFBQTtBQUFJLGNBQUssS0FBTCxDQUFXLE1BQWY7QUFBQTtBQUErQixjQUFL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O0FBQ0Esc0JBQXFCO0FBQ3JCOztBQUVBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQSw0QkFBMkI7QUFDM0I7QUFDQTtBQUNBO0FBQ0EsNkJBQTRCLFVBQVU7Ozs7Ozs7QUNuSXRDLG1CQUFrQix1RDs7Ozs7O0FDQWxCO0FBQ0Esd0NBQXVDLDBCQUEwQjtBQUNqRSx5Q0FBd0M7QUFDeEM7QUFDQSxHOzs7Ozs7QUNKQSw4QkFBNkI7QUFDN0Isc0NBQXFDLGdDIiwiZmlsZSI6InNjcmlwdHMubWluLmpzIiwic291cmNlc0NvbnRlbnQiOlsiIFx0Ly8gVGhlIG1vZHVsZSBjYWNoZVxuIFx0dmFyIGluc3RhbGxlZE1vZHVsZXMgPSB7fTtcblxuIFx0Ly8gVGhlIHJlcXVpcmUgZnVuY3Rpb25cbiBcdGZ1bmN0aW9uIF9fd2VicGFja19yZXF1aXJlX18obW9kdWxlSWQpIHtcblxuIFx0XHQvLyBDaGVjayBpZiBtb2R1bGUgaXMgaW4gY2FjaGVcbiBcdFx0aWYoaW5zdGFsbGVkTW9kdWxlc1ttb2R1bGVJZF0pXG4gXHRcdFx0cmV0dXJuIGluc3RhbGxlZE1vZHVsZXNbbW9kdWxlSWRdLmV4cG9ydHM7XG5cbiBcdFx0Ly8gQ3JlYXRlIGEgbmV3IG1vZHVsZSAoYW5kIHB1dCBpdCBpbnRvIHRoZSBjYWNoZSlcbiBcdFx0dmFyIG1vZHVsZSA9IGluc3RhbGxlZE1vZHVsZXNbbW9kdWxlSWRdID0ge1xuIFx0XHRcdGV4cG9ydHM6IHt9LFxuIFx0XHRcdGlkOiBtb2R1bGVJZCxcbiBcdFx0XHRsb2FkZWQ6IGZhbHNlXG4gXHRcdH07XG5cbiBcdFx0Ly8gRXhlY3V0ZSB0aGUgbW9kdWxlIGZ1bmN0aW9uXG4gXHRcdG1vZHVsZXNbbW9kdWxlSWRdLmNhbGwobW9kdWxlLmV4cG9ydHMsIG1vZHVsZSwgbW9kdWxlLmV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pO1xuXG4gXHRcdC8vIEZsYWcgdGhlIG1vZHVsZSBhcyBsb2FkZWRcbiBcdFx0bW9kdWxlLmxvYWRlZCA9IHRydWU7XG5cbiBcdFx0Ly8gUmV0dXJuIHRoZSBleHBvcnRzIG9mIHRoZSBtb2R1bGVcbiBcdFx0cmV0dXJuIG1vZHVsZS5leHBvcnRzO1xuIFx0fVxuXG5cbiBcdC8vIGV4cG9zZSB0aGUgbW9kdWxlcyBvYmplY3QgKF9fd2VicGFja19tb2R1bGVzX18pXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLm0gPSBtb2R1bGVzO1xuXG4gXHQvLyBleHBvc2UgdGhlIG1vZHVsZSBjYWNoZVxuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5jID0gaW5zdGFsbGVkTW9kdWxlcztcblxuIFx0Ly8gX193ZWJwYWNrX3B1YmxpY19wYXRoX19cbiBcdF9fd2VicGFja19yZXF1aXJlX18ucCA9IFwiXCI7XG5cbiBcdC8vIExvYWQgZW50cnkgbW9kdWxlIGFuZCByZXR1cm4gZXhwb3J0c1xuIFx0cmV0dXJuIF9fd2VicGFja19yZXF1aXJlX18oMCk7XG5cblxuXG4vKiogV0VCUEFDSyBGT09URVIgKipcbiAqKiB3ZWJwYWNrL2Jvb3RzdHJhcCAxMGRmNjMzMDg3NDhiNGM4Y2RhYVxuICoqLyIsInJlcXVpcmUgKCcuL21haW4uanMnKTtcbnJlcXVpcmUgKCcuL2NvbW1lbnRib3guanMnKTtcblxuXG5cbi8qKioqKioqKioqKioqKioqKlxuICoqIFdFQlBBQ0sgRk9PVEVSXG4gKiogLi9wdWJsaWMvanMvc2NyaXB0cy5qc1xuICoqIG1vZHVsZSBpZCA9IDBcbiAqKiBtb2R1bGUgY2h1bmtzID0gMFxuICoqLyIsIi8vIG1haW4uanNcbi8qIGVzbGludC1kaXNhYmxlIG5vLXVuZGVmICovXG4kKGRvY3VtZW50KS5yZWFkeShmdW5jdGlvbigpIHtcblxuICAgIC8vIGZpbmQgdGhlIFVSTCBvZiB5b3VyIEpTT04gZmlsZSBvbiBBV1MgLSBpdCdsbCBiZSBpbiB5b3VyIGJ1Y2tldFxuICAgIC8vIGFuZCBsb29rIHNvbWV0aGluZyBsaWtlIGh0dHBzOi8vczMtZXUtd2VzdC0xLmFtYXpvbmF3cy5jb20vW2J1Y2tldCBuYW1lXS9wb2xsZW4uanNvblxuICAgIC8vIHdlIGxvYWQgdGhlIEpTT04gZmlsZSB1c2luZyBqUXVlcnkncyBBSkFYXG4gICAgJC5nZXQoXCJodHRwczovL3MzLWV1LXdlc3QtMS5hbWF6b25hd3MuY29tL3RoZXBvbGxlbnJlcG9ydC9wb2xsZW4uanNvblwiKVxuXG4gICAgLy8gT25jZSB3ZSBoYXZlIHRoZSBkYXRhLCB3ZSBwYXJzZSBpdCB0byBmaW5kIHRoZSBwb2xsZW4gY291bnRcbiAgICAuZG9uZShmdW5jdGlvbihkYXRhKSB7XG4gICAgICAgIGRhdGEgPSBKU09OLnBhcnNlKGRhdGEpO1xuICAgICAgICBjb25zdCBwb2xsZW4gPSBkYXRhLmNvdW50O1xuXG4gICAgICAgIC8vIHVwZGF0ZSB0aGUgPGgxIGNsYXNzPVwibWVnYVwiPiB3aXRoIHRoZSBwb2xsZW4gY291bnRcbiAgICAgICAgJCgnLm1lZ2EnKS50ZXh0KHBvbGxlbik7XG4gICAgfSlcblxuICAgIC8vIGlmIHdlIGNvdWxkbid0IGdldCB0aGUgZGF0YSBmcm9tIEFXUywgZGlzcGxheSBhbiBlcnJvciBtZXNzYWdlXG4gICAgLmZhaWwoZnVuY3Rpb24oKSB7XG4gICAgICAgICQoJy5tZWdhJykudGV4dCgnVW5rbm93bicpO1xuICAgICAgICAkKCcubWFpbicpLmFwcGVuZCgnPHA+UmVmcmVzaCB0byB0cnkgYWdhaW48L3A+Jyk7XG4gICAgfSlcblxuICAgIC5hbHdheXMoZnVuY3Rpb24oKSB7XG4gICAgICAgIC8vIGlmIHlvdSdyZSB1c2luZyBhIGxvYWRpbmcgZ2lmLCB0aGlzIGlzIHdoZXJlIHlvdSdkIGhpZGUgaXRcbiAgICB9KTtcbn0pO1xuXG5cblxuLyoqKioqKioqKioqKioqKioqXG4gKiogV0VCUEFDSyBGT09URVJcbiAqKiAuL3B1YmxpYy9qcy9tYWluLmpzXG4gKiogbW9kdWxlIGlkID0gMVxuICoqIG1vZHVsZSBjaHVua3MgPSAwXG4gKiovIiwiLy9jb21tZW50Ym94LmpzXG4vKiBlc2xpbnQtZGlzYWJsZSBuby11bmRlZiAqL1xuLyogZXNsaW50LWRpc2FibGUgbm8tdW51c2VkLXZhcnMqL1xuY29uc3QgQ29tbWVudCA9IFJlYWN0LmNyZWF0ZUNsYXNzKHtcbiAgcmVuZGVyOmZ1bmN0aW9uKCl7XG4gICAgcmV0dXJuKFxuICAgICAgPGRpdiBjbGFzc05hbWU9XCJjb21tZW50XCI+XG4gICAgICAgIDxwPnt0aGlzLnByb3BzLmF1dGhvcn0gc2F5cyAtIHt0aGlzLnByb3BzLmNoaWxkcmVufTwvcD5cbiAgICAgIDwvZGl2PlxuICAgICk7XG4gIH1cbn0pO1xuY29uc3QgQ29tbWVudExpc3QgPSBSZWFjdC5jcmVhdGVDbGFzcyh7XG4gIHJlbmRlcjogZnVuY3Rpb24oKXtcbiAgICBjb25zdCBjb21tZW50Tm9kZXMgPSB0aGlzLnByb3BzLmRhdGEubWFwKGZ1bmN0aW9uKGNvbW1lbnQpe1xuICAgICAgcmV0dXJuKFxuICAgICAgICA8Q29tbWVudCBhdXRob3I9e2NvbW1lbnQuYXV0aG9yfSBrZXk9e2NvbW1lbnQuaWR9PlxuICAgICAgICAgIHtjb21tZW50LnRleHR9XG4gICAgICAgIDwvQ29tbWVudD5cbiAgICAgICk7XG4gICAgfSk7XG4gICAgcmV0dXJuKFxuICAgICAgPGRpdiBjbGFzc05hbWU9XCJjb21tZW50TGlzdFwiPlxuICAgICAgICB7Y29tbWVudE5vZGVzfVxuICAgICAgPC9kaXY+XG4gICAgKTtcbiAgfVxufSk7XG5jb25zdCBDb21tZW50Rm9ybSA9IFJlYWN0LmNyZWF0ZUNsYXNzKHtcbiAgZ2V0SW5pdGlhbFN0YXRlOiBmdW5jdGlvbigpe1xuICAgIHJldHVybnthdXRob3I6ICcnLCB0ZXh0OiAnJ307XG4gIH0sXG4gIGhhbmRsZUF1dGhvckNoYW5nZTogZnVuY3Rpb24oZSl7XG4gICAgdGhpcy5zZXRTdGF0ZSh7YXV0aG9yOiBlLnRhcmdldC52YWx1ZX0pO1xuICB9LFxuICBoYW5kbGVUZXh0Q2hhbmdlOiBmdW5jdGlvbihlKXtcbiAgICB0aGlzLnNldFN0YXRlKHt0ZXh0OiBlLnRhcmdldC52YWx1ZX0pO1xuICB9LFxuICBoYW5kbGVTdWJtaXQ6IGZ1bmN0aW9uKGUpe1xuICAgIGNvbnNvbGUubG9nKFwidGVzdCBub2RlIGRldlwiICsgcHJvY2Vzcy5lbnYuTk9ERV9ERVYpO1xuICAgIC8vU3RvcCBicm93c2VyIGRlZmF1bHQgc3VibWl0XG4gICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuICAgIGxldCBhdXRob3IgPSB0aGlzLnN0YXRlLmF1dGhvci50cmltKCk7XG4gICAgbGV0IHRleHQgPSAgdGhpcy5zdGF0ZS50ZXh0LnRyaW0oKTtcbiAgICBpZiAoIXRleHQgfHwgIWF1dGhvcil7XG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIGxldCBpZCA9IERhdGUubm93KCk7XG4gICAgdGhpcy5wcm9wcy5vbkNvbnRlbnRTdWJtaXQoe2lkOiBpZC50b1N0cmluZygpLCBhdXRob3I6IGF1dGhvciwgdGV4dDogdGV4dH0pO1xuICAgIHRoaXMuc2V0U3RhdGUoe2F1dGhvcjogJycsIHRleHQ6ICcnfSk7XG4gIH0sXG4gIHJlbmRlcjogZnVuY3Rpb24oKXtcbiAgICByZXR1cm4oXG4gICAgICA8Zm9ybSBjbGFzc05hbWU9XCJjb21tZW50Rm9ybVwiIG9uU3VibWl0PXt0aGlzLmhhbmRsZVN1Ym1pdH0+XG4gICAgICAgIDxpbnB1dFxuICAgICAgICAgIHR5cGU9XCJ0ZXh0XCJcbiAgICAgICAgICBwbGFjZWhvbGRlcj1cIllvdXIgbmFtZVwiXG4gICAgICAgICAgdmFsdWU9e3RoaXMuc3RhdGUuYXV0aG9yfVxuICAgICAgICAgIG9uQ2hhbmdlPXt0aGlzLmhhbmRsZUF1dGhvckNoYW5nZX1cbiAgICAgICAgLz5cbiAgICAgICAgPGlucHV0XG4gICAgICAgICAgdHlwZT1cInRleHRcIlxuICAgICAgICAgIHBsYWNlaG9sZGVyPVwiV2hhdCB5b3Ugd2FudCB0byBzYXkuLi5cIlxuICAgICAgICAgIHZhbHVlPXt0aGlzLnN0YXRlLnRleHR9XG4gICAgICAgICAgb25DaGFuZ2U9e3RoaXMuaGFuZGxlVGV4dENoYW5nZX1cbiAgICAgICAgLz5cbiAgICAgICAgPGlucHV0IHR5cGU9XCJzdWJtaXRcIiB2YWx1ZT1cIlBvc3RcIiAvPlxuICAgICAgPC9mb3JtPlxuICAgICk7XG4gIH1cbn0pO1xuY29uc3QgQ29tbWVudEJveCA9IFJlYWN0LmNyZWF0ZUNsYXNzKHtcbiAgbG9hZENvbW1lbnRzRnJvbVNlcnZlcjogZnVuY3Rpb24oKXtcbiAgICAkLmFqYXgoe1xuICAgICAgdXJsOiB0aGlzLnByb3BzLnVybCxcbiAgICAgIGRhdGFUeXBlOiAnanNvbicsXG4gICAgICBjYWNoZTogZmFsc2UsXG4gICAgICBzdWNjZXNzOiBmdW5jdGlvbihkYXRhKSB7XG4gICAgICAgIGNvbnNvbGUubG9nKGRhdGEpO1xuICAgICAgICB0aGlzLnNldFN0YXRlKHtkYXRhOiBkYXRhfSk7XG4gICAgICB9LmJpbmQodGhpcyksXG4gICAgICBlcnJvcjogZnVuY3Rpb24oeGhyLCBzdGF0dXMsIGVycikge1xuICAgICAgICBjb25zb2xlLmVycm9yKHRoaXMucHJvcHMudXJsLCBzdGF0dXMsIGVyci50b1N0cmluZygpKTtcbiAgICAgIH0uYmluZCh0aGlzKVxuICAgIH0pO1xuICB9LFxuICBoYW5kbGVDb21tZW50U3VibWl0OiBmdW5jdGlvbihjb21tZW50KXtcbiAgICAvLyBJbnNlcnQgbmV3IGNvbW1lbnQgYW5kIGRlbGV0ZSBsYXN0IG9uZVxuICAgIHRoaXMuc3RhdGUuZGF0YS5zcGxpY2UoMCwgMCwgY29tbWVudCk7XG4gICAgdGhpcy5zdGF0ZS5kYXRhLnNwbGljZSgtMSwgMSk7XG4gICAgJC5hamF4KHtcbiAgICAgIHVybDogdGhpcy5wcm9wcy5zZW5kQ29tbWVudFVybCxcbiAgICAgIGRhdGFUeXBlOiAnanNvbicsXG4gICAgICB0eXBlOiAnUE9TVCcsXG4gICAgICBkYXRhOiBKU09OLnN0cmluZ2lmeSh0aGlzLnN0YXRlLmRhdGEpLFxuICAgICAgY29udGVudFR5cGU6IFwiYXBwbGljYXRpb24vanNvblwiLFxuICAgICAgc3VjY2VzczogZnVuY3Rpb24oZGF0YSkge1xuICAgICAgICBjb25zb2xlLmxvZyhkYXRhKTtcbiAgICAgICAgY29uc29sZS5sb2coXCJBZnRlciBzZW5kaW5nIFwiICsgSlNPTi5zdHJpbmdpZnkodGhpcy5zdGF0ZS5kYXRhKSk7XG4gICAgICB9LmJpbmQodGhpcyksXG4gICAgICBlcnJvcjogZnVuY3Rpb24oeGhyLCBzdGF0dXMsIGVycikge1xuICAgICAgICBjb25zb2xlLmVycm9yKHRoaXMucHJvcHMuc2VuZENvbW1lbnRVcmwsIHN0YXR1cywgZXJyLnRvU3RyaW5nKCkpO1xuICAgICAgfS5iaW5kKHRoaXMpXG4gICAgfSk7XG4gIH0sXG4gIGdldEluaXRpYWxTdGF0ZTogZnVuY3Rpb24oKXtcbiAgICByZXR1cm4ge2RhdGE6IFtdfTtcbiAgfSxcbiAgY29tcG9uZW50RGlkTW91bnQ6IGZ1bmN0aW9uKCkge1xuICAgIHRoaXMubG9hZENvbW1lbnRzRnJvbVNlcnZlcigpO1xuICAgIHNldEludGVydmFsKHRoaXMubG9hZENvbW1lbnRzRnJvbVNlcnZlciwgdGhpcy5wcm9wcy5wb2xsSW50ZXJ2YWwpO1xuICB9LFxuICByZW5kZXI6IGZ1bmN0aW9uKCl7XG4gICAgcmV0dXJuKFxuICAgICAgPGRpdiBjbGFzc05hbWU9XCJjb21tZW50Qm94XCI+XG4gICAgICAgIDxoMT5IYXZlIHlvdXIgc2F5PC9oMT5cbiAgICAgICAgPENvbW1lbnRGb3JtIG9uQ29udGVudFN1Ym1pdD17dGhpcy5oYW5kbGVDb21tZW50U3VibWl0fS8+XG4gICAgICAgIDxDb21tZW50TGlzdCBkYXRhPXt0aGlzLnN0YXRlLmRhdGF9Lz5cbiAgICAgIDwvZGl2PlxuICAgICk7XG4gIH1cbn0pO1xuUmVhY3RET00ucmVuZGVyKFxuICA8Q29tbWVudEJveFxuICAgIHVybD1cImh0dHBzOi8vczMtZXUtd2VzdC0xLmFtYXpvbmF3cy5jb20vdGhlcG9sbGVucmVwb3J0L2NvbW1lbnRzLmpzb25cIlxuICAgIHNlbmRDb21tZW50VXJsPXtDT01NRU5UU19BUElfVVJMfVxuICAgIHBvbGxJbnRlcnZhbD17MjAwMH0vPixcbiAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2NvbW1lbnRzJylcbik7XG5cblxuXG4vKiogV0VCUEFDSyBGT09URVIgKipcbiAqKiAuL3B1YmxpYy9qcy9jb21tZW50Ym94LmpzXG4gKiovIiwiLy8gc2hpbSBmb3IgdXNpbmcgcHJvY2VzcyBpbiBicm93c2VyXG52YXIgcHJvY2VzcyA9IG1vZHVsZS5leHBvcnRzID0ge307XG5cbi8vIGNhY2hlZCBmcm9tIHdoYXRldmVyIGdsb2JhbCBpcyBwcmVzZW50IHNvIHRoYXQgdGVzdCBydW5uZXJzIHRoYXQgc3R1YiBpdFxuLy8gZG9uJ3QgYnJlYWsgdGhpbmdzLiAgQnV0IHdlIG5lZWQgdG8gd3JhcCBpdCBpbiBhIHRyeSBjYXRjaCBpbiBjYXNlIGl0IGlzXG4vLyB3cmFwcGVkIGluIHN0cmljdCBtb2RlIGNvZGUgd2hpY2ggZG9lc24ndCBkZWZpbmUgYW55IGdsb2JhbHMuICBJdCdzIGluc2lkZSBhXG4vLyBmdW5jdGlvbiBiZWNhdXNlIHRyeS9jYXRjaGVzIGRlb3B0aW1pemUgaW4gY2VydGFpbiBlbmdpbmVzLlxuXG52YXIgY2FjaGVkU2V0VGltZW91dDtcbnZhciBjYWNoZWRDbGVhclRpbWVvdXQ7XG5cbihmdW5jdGlvbiAoKSB7XG4gICAgdHJ5IHtcbiAgICAgICAgY2FjaGVkU2V0VGltZW91dCA9IHNldFRpbWVvdXQ7XG4gICAgfSBjYXRjaCAoZSkge1xuICAgICAgICBjYWNoZWRTZXRUaW1lb3V0ID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdzZXRUaW1lb3V0IGlzIG5vdCBkZWZpbmVkJyk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgdHJ5IHtcbiAgICAgICAgY2FjaGVkQ2xlYXJUaW1lb3V0ID0gY2xlYXJUaW1lb3V0O1xuICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgICAgY2FjaGVkQ2xlYXJUaW1lb3V0ID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdjbGVhclRpbWVvdXQgaXMgbm90IGRlZmluZWQnKTtcbiAgICAgICAgfVxuICAgIH1cbn0gKCkpXG5mdW5jdGlvbiBydW5UaW1lb3V0KGZ1bikge1xuICAgIGlmIChjYWNoZWRTZXRUaW1lb3V0ID09PSBzZXRUaW1lb3V0KSB7XG4gICAgICAgIHJldHVybiBzZXRUaW1lb3V0KGZ1biwgMCk7XG4gICAgfSBlbHNlIHtcbiAgICAgICAgcmV0dXJuIGNhY2hlZFNldFRpbWVvdXQuY2FsbChudWxsLCBmdW4sIDApO1xuICAgIH1cbn1cbmZ1bmN0aW9uIHJ1bkNsZWFyVGltZW91dChtYXJrZXIpIHtcbiAgICBpZiAoY2FjaGVkQ2xlYXJUaW1lb3V0ID09PSBjbGVhclRpbWVvdXQpIHtcbiAgICAgICAgY2xlYXJUaW1lb3V0KG1hcmtlcik7XG4gICAgfSBlbHNlIHtcbiAgICAgICAgY2FjaGVkQ2xlYXJUaW1lb3V0LmNhbGwobnVsbCwgbWFya2VyKTtcbiAgICB9XG59XG52YXIgcXVldWUgPSBbXTtcbnZhciBkcmFpbmluZyA9IGZhbHNlO1xudmFyIGN1cnJlbnRRdWV1ZTtcbnZhciBxdWV1ZUluZGV4ID0gLTE7XG5cbmZ1bmN0aW9uIGNsZWFuVXBOZXh0VGljaygpIHtcbiAgICBpZiAoIWRyYWluaW5nIHx8ICFjdXJyZW50UXVldWUpIHtcbiAgICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICBkcmFpbmluZyA9IGZhbHNlO1xuICAgIGlmIChjdXJyZW50UXVldWUubGVuZ3RoKSB7XG4gICAgICAgIHF1ZXVlID0gY3VycmVudFF1ZXVlLmNvbmNhdChxdWV1ZSk7XG4gICAgfSBlbHNlIHtcbiAgICAgICAgcXVldWVJbmRleCA9IC0xO1xuICAgIH1cbiAgICBpZiAocXVldWUubGVuZ3RoKSB7XG4gICAgICAgIGRyYWluUXVldWUoKTtcbiAgICB9XG59XG5cbmZ1bmN0aW9uIGRyYWluUXVldWUoKSB7XG4gICAgaWYgKGRyYWluaW5nKSB7XG4gICAgICAgIHJldHVybjtcbiAgICB9XG4gICAgdmFyIHRpbWVvdXQgPSBydW5UaW1lb3V0KGNsZWFuVXBOZXh0VGljayk7XG4gICAgZHJhaW5pbmcgPSB0cnVlO1xuXG4gICAgdmFyIGxlbiA9IHF1ZXVlLmxlbmd0aDtcbiAgICB3aGlsZShsZW4pIHtcbiAgICAgICAgY3VycmVudFF1ZXVlID0gcXVldWU7XG4gICAgICAgIHF1ZXVlID0gW107XG4gICAgICAgIHdoaWxlICgrK3F1ZXVlSW5kZXggPCBsZW4pIHtcbiAgICAgICAgICAgIGlmIChjdXJyZW50UXVldWUpIHtcbiAgICAgICAgICAgICAgICBjdXJyZW50UXVldWVbcXVldWVJbmRleF0ucnVuKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgcXVldWVJbmRleCA9IC0xO1xuICAgICAgICBsZW4gPSBxdWV1ZS5sZW5ndGg7XG4gICAgfVxuICAgIGN1cnJlbnRRdWV1ZSA9IG51bGw7XG4gICAgZHJhaW5pbmcgPSBmYWxzZTtcbiAgICBydW5DbGVhclRpbWVvdXQodGltZW91dCk7XG59XG5cbnByb2Nlc3MubmV4dFRpY2sgPSBmdW5jdGlvbiAoZnVuKSB7XG4gICAgdmFyIGFyZ3MgPSBuZXcgQXJyYXkoYXJndW1lbnRzLmxlbmd0aCAtIDEpO1xuICAgIGlmIChhcmd1bWVudHMubGVuZ3RoID4gMSkge1xuICAgICAgICBmb3IgKHZhciBpID0gMTsgaSA8IGFyZ3VtZW50cy5sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgYXJnc1tpIC0gMV0gPSBhcmd1bWVudHNbaV07XG4gICAgICAgIH1cbiAgICB9XG4gICAgcXVldWUucHVzaChuZXcgSXRlbShmdW4sIGFyZ3MpKTtcbiAgICBpZiAocXVldWUubGVuZ3RoID09PSAxICYmICFkcmFpbmluZykge1xuICAgICAgICBydW5UaW1lb3V0KGRyYWluUXVldWUpO1xuICAgIH1cbn07XG5cbi8vIHY4IGxpa2VzIHByZWRpY3RpYmxlIG9iamVjdHNcbmZ1bmN0aW9uIEl0ZW0oZnVuLCBhcnJheSkge1xuICAgIHRoaXMuZnVuID0gZnVuO1xuICAgIHRoaXMuYXJyYXkgPSBhcnJheTtcbn1cbkl0ZW0ucHJvdG90eXBlLnJ1biA9IGZ1bmN0aW9uICgpIHtcbiAgICB0aGlzLmZ1bi5hcHBseShudWxsLCB0aGlzLmFycmF5KTtcbn07XG5wcm9jZXNzLnRpdGxlID0gJ2Jyb3dzZXInO1xucHJvY2Vzcy5icm93c2VyID0gdHJ1ZTtcbnByb2Nlc3MuZW52ID0ge307XG5wcm9jZXNzLmFyZ3YgPSBbXTtcbnByb2Nlc3MudmVyc2lvbiA9ICcnOyAvLyBlbXB0eSBzdHJpbmcgdG8gYXZvaWQgcmVnZXhwIGlzc3Vlc1xucHJvY2Vzcy52ZXJzaW9ucyA9IHt9O1xuXG5mdW5jdGlvbiBub29wKCkge31cblxucHJvY2Vzcy5vbiA9IG5vb3A7XG5wcm9jZXNzLmFkZExpc3RlbmVyID0gbm9vcDtcbnByb2Nlc3Mub25jZSA9IG5vb3A7XG5wcm9jZXNzLm9mZiA9IG5vb3A7XG5wcm9jZXNzLnJlbW92ZUxpc3RlbmVyID0gbm9vcDtcbnByb2Nlc3MucmVtb3ZlQWxsTGlzdGVuZXJzID0gbm9vcDtcbnByb2Nlc3MuZW1pdCA9IG5vb3A7XG5cbnByb2Nlc3MuYmluZGluZyA9IGZ1bmN0aW9uIChuYW1lKSB7XG4gICAgdGhyb3cgbmV3IEVycm9yKCdwcm9jZXNzLmJpbmRpbmcgaXMgbm90IHN1cHBvcnRlZCcpO1xufTtcblxucHJvY2Vzcy5jd2QgPSBmdW5jdGlvbiAoKSB7IHJldHVybiAnLycgfTtcbnByb2Nlc3MuY2hkaXIgPSBmdW5jdGlvbiAoZGlyKSB7XG4gICAgdGhyb3cgbmV3IEVycm9yKCdwcm9jZXNzLmNoZGlyIGlzIG5vdCBzdXBwb3J0ZWQnKTtcbn07XG5wcm9jZXNzLnVtYXNrID0gZnVuY3Rpb24oKSB7IHJldHVybiAwOyB9O1xuXG5cblxuLyoqKioqKioqKioqKioqKioqXG4gKiogV0VCUEFDSyBGT09URVJcbiAqKiAuL34vcHJvY2Vzcy9icm93c2VyLmpzXG4gKiogbW9kdWxlIGlkID0gM1xuICoqIG1vZHVsZSBjaHVua3MgPSAwXG4gKiovIiwibW9kdWxlLmV4cG9ydHMgPSB7IFwiZGVmYXVsdFwiOiByZXF1aXJlKFwiY29yZS1qcy9saWJyYXJ5L2ZuL2pzb24vc3RyaW5naWZ5XCIpLCBfX2VzTW9kdWxlOiB0cnVlIH07XG5cblxuLyoqKioqKioqKioqKioqKioqXG4gKiogV0VCUEFDSyBGT09URVJcbiAqKiAuL34vYmFiZWwtcnVudGltZS9jb3JlLWpzL2pzb24vc3RyaW5naWZ5LmpzXG4gKiogbW9kdWxlIGlkID0gNFxuICoqIG1vZHVsZSBjaHVua3MgPSAwXG4gKiovIiwidmFyIGNvcmUgID0gcmVxdWlyZSgnLi4vLi4vbW9kdWxlcy9fY29yZScpXG4gICwgJEpTT04gPSBjb3JlLkpTT04gfHwgKGNvcmUuSlNPTiA9IHtzdHJpbmdpZnk6IEpTT04uc3RyaW5naWZ5fSk7XG5tb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uIHN0cmluZ2lmeShpdCl7IC8vIGVzbGludC1kaXNhYmxlLWxpbmUgbm8tdW51c2VkLXZhcnNcbiAgcmV0dXJuICRKU09OLnN0cmluZ2lmeS5hcHBseSgkSlNPTiwgYXJndW1lbnRzKTtcbn07XG5cblxuLyoqKioqKioqKioqKioqKioqXG4gKiogV0VCUEFDSyBGT09URVJcbiAqKiAuL34vY29yZS1qcy9saWJyYXJ5L2ZuL2pzb24vc3RyaW5naWZ5LmpzXG4gKiogbW9kdWxlIGlkID0gNVxuICoqIG1vZHVsZSBjaHVua3MgPSAwXG4gKiovIiwidmFyIGNvcmUgPSBtb2R1bGUuZXhwb3J0cyA9IHt2ZXJzaW9uOiAnMi40LjAnfTtcbmlmKHR5cGVvZiBfX2UgPT0gJ251bWJlcicpX19lID0gY29yZTsgLy8gZXNsaW50LWRpc2FibGUtbGluZSBuby11bmRlZlxuXG5cbi8qKioqKioqKioqKioqKioqKlxuICoqIFdFQlBBQ0sgRk9PVEVSXG4gKiogLi9+L2NvcmUtanMvbGlicmFyeS9tb2R1bGVzL19jb3JlLmpzXG4gKiogbW9kdWxlIGlkID0gNlxuICoqIG1vZHVsZSBjaHVua3MgPSAwXG4gKiovIl0sInNvdXJjZVJvb3QiOiIifQ==